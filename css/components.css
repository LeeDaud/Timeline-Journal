/* æ¨¡å¼åˆ‡æ¢æŒ‰é’® */
.btn-mode-toggle {
  padding: 6px 12px;
  font-size: 12px;
  color: var(--color-text-secondary);
  background: transparent;
  border: 1px solid var(--color-divider);
  border-radius: 4px;
  cursor: pointer;
  transition: all var(--transition-fast);
  white-space: nowrap;
}

.btn-mode-toggle:hover {
  color: var(--color-text-primary);
  border-color: var(--color-text-tertiary);
  background-color: rgba(0, 0, 0, 0.02);
}

.btn-mode-toggle:active {
  transform: scale(0.95);
}

/* ä¸»é¢˜åˆ‡æ¢æŒ‰é’® */
.btn-theme-toggle {
  padding: 6px 12px;
  font-size: 12px;
  color: var(--color-text-secondary);
  background: transparent;
  border: 1px solid var(--color-divider);
  border-radius: 4px;
  cursor: pointer;
  transition: all var(--transition-fast);
  display: flex;
  align-items: center;
  justify-content: center;
  white-space: nowrap;
}

.btn-theme-toggle:hover {
  color: var(--color-text-primary);
  border-color: var(--color-text-tertiary);
  background-color: rgba(0, 0, 0, 0.02);
}

.btn-theme-toggle:active {
  transform: scale(0.95);
}

.theme-text {
  display: block;
  line-height: 1;
  font-size: 12px;
  font-weight: 400;
  transition: opacity var(--transition-normal);
}

/* ä¸»é¢˜åˆ‡æ¢åŠ¨ç”» */
.btn-theme-toggle:active .theme-text {
  opacity: 0.6;
}

/* æ–°å»ºæŒ‰é’® */
.btn-new {
  width: 32px;
  height: 32px;
  font-size: 24px;
  color: var(--color-text-secondary);
  transition: color var(--transition-fast);
}

.btn-new:hover {
  color: var(--color-text-primary);
}

/* ç©ºçŠ¶æ€ */
.empty-state {
  text-align: center;
  padding: var(--spacing-3xl) 0;
}

.empty-hint {
  font-size: var(--font-size-date);
  color: var(--color-text-tertiary);
}

/* ========================================
   å¹´ä»½åˆ†éš”ç¬¦ï¼ˆæ—¶é—´ç« èŠ‚ç•™ç™½ï¼‰- æœ€å¼ºçš„èŠ‚å¥åœé¡¿
   ======================================== */

.year-divider {
  position: relative;
  height: 200px;  /* æ›´å¤§ç•™ç™½ï¼Œè¥é€ æ—¶é—´æ–­å±‚ */
  display: flex;
  align-items: center;
  justify-content: center;
  margin: var(--spacing-5xl) 0;  /* 160px - ä¸ç”Ÿæ—¥åŒçº§çš„åœé¡¿ */
}

.year-divider-number {
  font-size: 100px;  /* ä» 80px æå‡åˆ° 100px */
  font-weight: 100;  /* æç»†å­—ä½“ï¼Œé™ä½å­˜åœ¨æ„Ÿ */
  color: var(--color-text-primary);
  opacity: 0.08;  /* ä» 0.1 è°ƒæ•´åˆ° 0.08ï¼Œæ›´å…‹åˆ¶ */
  letter-spacing: 8px;
  user-select: none;
  pointer-events: none;

  /* ç­‰å®½æ•°å­—ï¼Œä¿æŒå¯¹é½ */
  font-variant-numeric: tabular-nums;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;

  /* å¾®å¦™çš„æµ®ç°åŠ¨ç”» */
  animation: yearFadeIn 1200ms ease-out;
}

@keyframes yearFadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 0.08;
    transform: translateY(0);
  }
}

/* å¯é€‰ï¼šhover æ—¶å¾®å¾®æµ®ç° */
.year-divider:hover .year-divider-number {
  opacity: 0.15;
  transition: opacity 600ms ease;
}

/* ç§»åŠ¨ç«¯ä¼˜åŒ– */
@media (max-width: 767px) {
  .year-divider {
    height: 140px;
    margin: 60px 0;
  }

  .year-divider-number {
    font-size: 72px;  /* ä» 60px æå‡åˆ° 72px */
    letter-spacing: 4px;
  }
}

/* æ—¥æœŸåˆ†ç»„å®¹å™¨ */
.date-group {
  position: relative;
  transition: background-color 400ms ease;
  margin-left: -8px;
  margin-right: -8px;
  padding-left: 8px;
  padding-right: 8px;
  border-radius: 4px;
}

/* ğŸ†• æ—¥æœŸåˆ†ç»„é«˜äº®ï¼ˆé¼ æ ‡æ‚¬åœè”åŠ¨ï¼‰*/
.date-group--active {
  background-color: rgba(0, 0, 0, 0.02);
}

/* ğŸ†• ç”Ÿæ—¥åˆ†ç»„ï¼šæœ€å¤§ç•™ç™½ï¼ˆç³»ç»Ÿçº§ï¼‰*/
.date-group--birthday {
  margin-top: 40px;
  margin-bottom: 40px;
}

/* ğŸ†• ç”Ÿæ—¥ä¾§è¾¹æ ‡è®°ï¼ˆå·¦ä¾§ç²—ç«–çº¿ï¼‰*/
.birthday-mark {
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 3px;
  background: linear-gradient(
    to bottom,
    var(--color-birthday) 0%,
    rgba(47, 79, 108, 0.5) 50%,
    var(--color-birthday) 100%
  );
  border-radius: 0 1.5px 1.5px 0;
}

/* ğŸ†• çºªå¿µæ—¥åˆ†ç»„ï¼šå¢åŠ ä¸Šä¸‹ç•™ç™½ */
.date-group--anniversary {
  margin-top: 24px;
  margin-bottom: 24px;
}

/* ğŸ†• çºªå¿µæ—¥ä¾§è¾¹æ ‡è®°ï¼ˆå·¦ä¾§ç»†ç«–çº¿ï¼‰*/
.anniversary-mark {
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 2px;
  background: linear-gradient(
    to bottom,
    var(--color-anniversary) 0%,
    rgba(139, 99, 56, 0.4) 50%,
    var(--color-anniversary) 100%
  );
  border-radius: 0 1px 1px 0;
}

/* æ—¥æœŸåˆ†å‰²çº¿ - æ™®é€šæ—¥å­çš„èŠ‚å¥ */
.date-divider {
  margin: var(--spacing-2xl) 0 var(--spacing-lg);  /* 64px / 28px */
  border-top: 1px dashed var(--color-divider);
  padding-top: var(--spacing-lg);
}

/* ç”Ÿæ—¥çš„æ—¥æœŸåˆ†å‰²çº¿ï¼šæœ€å¤§ç•™ç™½ + åŒçº¿ï¼ˆç³»ç»Ÿçº§ï¼‰*/
.date-group--birthday .date-divider {
  border-top: 2px solid var(--color-birthday);
  margin: var(--spacing-5xl) 0 var(--spacing-3xl);  /* 160px / 80px - æœ€éƒ‘é‡çš„åœé¡¿ */
  padding-top: var(--spacing-3xl);
  position: relative;
}

/* ç”Ÿæ—¥åˆ†å‰²çº¿ä¸‹æ–¹çš„å¾®å¦™è£…é¥°çº¿ï¼ˆé›é’è‰²ï¼‰*/
.date-group--birthday .date-divider::after {
  content: '';
  position: absolute;
  top: -5px;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(
    to right,
    transparent 0%,
    rgba(47, 79, 108, 0.15) 20%,
    rgba(47, 79, 108, 0.15) 80%,
    transparent 100%
  );
}

/* çºªå¿µæ—¥çš„æ—¥æœŸåˆ†å‰²çº¿ï¼šå®çº¿ + æš–æ£•è‰² + æ˜æ˜¾ç•™ç™½ */
.date-group--anniversary .date-divider {
  border-top: 1.5px solid var(--color-anniversary);
  margin: var(--spacing-4xl) 0 var(--spacing-2xl);  /* 120px / 64px - é‡è¦çš„åœé¡¿ */
  padding-top: var(--spacing-2xl);
}

/* ç¬¬ä¸€ä¸ªæ—¥æœŸåˆ†ç»„ï¼šå‡å°‘ä¸Šæ–¹ç•™ç™½ */
.date-group:first-child .date-divider {
  margin-top: 0;
}

/* æ—¥æœŸå¤´éƒ¨ - é‡æ–°è®¾è®¡ä¸º"ç« èŠ‚æ ‡é¢˜"è€Œé"æ ‡ç­¾" */
.date-header {
  display: flex;
  align-items: baseline;  /* æ”¹ä¸º baseline å¯¹é½ */
  gap: 12px;
  margin-bottom: var(--spacing-lg);  /* å¢åŠ åº•éƒ¨é—´è· */
  padding-left: 0;  /* ä¸æ—¶é—´è½´å¯¹é½ */
}

/* æ—¥æœŸå®¹å™¨ */
.date-label {
  display: flex;
  align-items: baseline;
  gap: 6px;
  font-weight: 400;
  color: var(--color-text-secondary);
  opacity: var(--date-opacity-default);
  line-height: 1;
}

/* å¹´ä»½ - å‰ç¼€ï¼Œæå¼±ï¼ˆè¿›ä¸€æ­¥å¼±åŒ–ï¼‰*/
.date-year {
  font-size: 10px;
  font-weight: 400;
  opacity: 0.25;  /* ä» 0.4 é™åˆ° 0.25ï¼Œå‡ ä¹éšå½¢ */
  letter-spacing: 0.5px;
}

/* æœˆ/æ—¥ - ä¸»è§†è§‰ï¼ˆå¢å¼ºï¼‰*/
.date-month-day {
  font-size: var(--font-size-date-number);  /* 22px */
  font-weight: 300;
  letter-spacing: 0;
  line-height: 1;
  opacity: 1;  /* å®Œå…¨æ˜¾ç¤º */
}

/* åˆ†éš”ç¬¦ï¼ˆæœˆã€æ—¥å­—ï¼‰*/
.date-separator {
  font-size: 12px;
  font-weight: 400;
  opacity: 0.5;
  margin: 0 1px;
}

/* "æ—¥"å­—åé¢éœ€è¦æ›´å¤šé—´è· */
.date-separator--day {
  margin-right: 6px;
}

/* æ˜ŸæœŸ - è¾…åŠ©ä¿¡æ¯ï¼ˆç•¥å¼ºäºå¹´ä»½ï¼‰*/
.date-weekday {
  font-size: 11px;
  font-weight: 400;
  opacity: 0.50;
  letter-spacing: 0.5px;
  margin-left: 2px;
}

/* ğŸ†• ç”Ÿæ—¥æ ‡ç­¾ï¼šæœ€å¤§ + é›é’è‰²ï¼ˆç³»ç»Ÿçº§ï¼‰*/
.date-label--birthday {
  font-size: 12px;  /* æœ€å¤§ */
  font-weight: 600;  /* æœ€ç²— */
  color: var(--color-birthday);
  opacity: 1;
  letter-spacing: 2px;  /* æœ€å®½å­—é—´è· */
}

/* ğŸ†• çºªå¿µæ—¥æ ‡ç­¾ï¼šç¨å¤§ + æš–æ£•è‰² */
.date-label--anniversary {
  font-size: 11px;  /* ä» 10px å¢åŠ åˆ° 11px */
  font-weight: 500;
  color: var(--color-anniversary);
  opacity: 1;
  letter-spacing: 1.5px;
}

/* ========================================
   å¤©æ°”é€‰æ‹©å™¨ - å¢å¼ºå¯¹æ¯”åº¦
   ======================================== */

.weather-selector {
  width: 18px;
  height: 18px;
  padding: 0;
  border: none;
  background: transparent;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0.35;  /* ä» 0.25 æå‡åˆ° 0.35 */
  transition: opacity var(--transition-normal),
              transform var(--transition-fast);
  flex-shrink: 0;
}

.weather-selector:hover {
  opacity: 0.65;  /* ä» 0.5 æå‡åˆ° 0.65 */
  transform: scale(1.1);
}

/* æœ‰å¤©æ°”æ—¶å¢å¼ºå­˜åœ¨æ„Ÿ */
.weather-selector[data-weather]:not([data-weather=""]) {
  opacity: 0.50;  /* ä» 0.35 æå‡åˆ° 0.50 */
}

.weather-selector[data-weather]:not([data-weather=""]):hover {
  opacity: 0.75;  /* ä» 0.6 æå‡åˆ° 0.75 */
}

/* å¤©æ°”å›¾æ ‡ */
.weather-icon {
  width: 100%;
  height: 100%;
  color: var(--color-text-secondary);  /* ä½¿ç”¨æ¬¡è¦æ–‡å­—è‰²ï¼Œæå‡å¯¹æ¯”åº¦ */
}

/* ç©ºçŠ¶æ€ï¼šæ˜¾ç¤ºä¸€ä¸ªåœ†ç‚¹ï¼ˆæš—ç¤ºå¯ç‚¹å‡»ï¼‰*/
.weather-selector[data-weather=""]::before {
  content: '';
  width: 5px;
  height: 5px;
  border-radius: 50%;
  background-color: currentColor;
  display: block;
}

.weather-selector[data-weather=""]:hover::before {
  width: 6px;
  height: 6px;
}

/* ç¡®ä¿æŒ‰é’®åœ¨ç§»åŠ¨ç«¯æœ‰è¶³å¤Ÿçš„ç‚¹å‡»åŒºåŸŸ */
@media (max-width: 767px) {
  .weather-selector {
    width: 20px;
    height: 20px;
    margin-right: -4px;  /* è§†è§‰ä¸Šæ›´ç´§å‡‘ */
  }
}

/* å•æ¡è®°å½• - å¼ºåŒ–æ—¶é—´çº¿å™äº‹ */
.entry-item {
  display: flex;
  margin-bottom: var(--entry-spacing-medium);  /* é»˜è®¤ä¸­ç­‰é—´è· */
  cursor: pointer;
  transition: background-color var(--transition-slow);
  padding: 10px 0;                   /* å¢åŠ ä¸Šä¸‹ç•™ç™½ */
  margin-left: -12px;                /* æ‰©å¤§ç‚¹å‡»åŒºåŸŸ */
  margin-right: -12px;
  padding-left: 12px;
  padding-right: 12px;
  border-radius: 6px;                /* ç•¥å¾®å¢åŠ åœ†è§’ */
  position: relative;
}

.entry-item:hover {
  background-color: var(--hover-bg);
}

/* å‚ç›´æ—¶é—´çº¿ - è´¯ç©¿æ•´ä¸ªè®°å½• */
.entry-item::before {
  content: '';
  position: absolute;
  left: var(--timeline-offset);      /* 64pxï¼Œåœ¨æ—¶é—´æˆ³å³ä¾§ */
  top: 0;
  bottom: 0;
  width: var(--timeline-width);      /* 1px */
  background: var(--timeline-color);  /* ææ·¡ç°çº¿ */
  pointer-events: none;
}

/* æ—¶é—´èŠ‚ç‚¹åœ†ç‚¹ - å¢å¼ºå­˜åœ¨æ„Ÿ */
.entry-item::after {
  content: '';
  position: absolute;
  left: calc(var(--timeline-offset) - 2.5px);  /* å±…ä¸­å¯¹é½æ—¶é—´çº¿ */
  top: 20px;                         /* å¯¹é½æ—¶é—´æˆ³ä½ç½® */
  width: 6px;                        /* ä» 5px å¢åŠ åˆ° 6px */
  height: 6px;
  border-radius: 50%;
  background: var(--color-text-secondary);
  opacity: 0.35;                     /* ä» 0.25 å¢åŠ åˆ° 0.35 */
  transition: all var(--transition-normal);
  pointer-events: none;
}

.entry-item:hover::after {
  opacity: 0.55;
  transform: scale(1.2);
}

/* é¦–æ¡è®°å½•ï¼šé¢å¤–ä¸Šæ–¹é—´è· */
.date-group .entry-item:first-of-type {
  margin-top: 12px;
}

/* æœ«æ¡è®°å½•ï¼šå‡å°‘ä¸‹æ–¹é—´è· */
.date-group:last-child .entry-item:last-of-type {
  margin-bottom: 16px;
}

/* æ—¶é—´æˆ³ - æ”¶çª„å®½åº¦ */
.entry-time {
  width: 52px;                       /* ä» 56px æ”¶çª„åˆ° 52px */
  flex-shrink: 0;
  font-size: var(--font-size-time);  /* 12pxï¼Œå·²åœ¨å˜é‡ä¸­å¢å¼º */
  font-weight: 500;                  /* å¢åŠ å­—é‡ */
  color: var(--color-text-secondary);
  text-align: right;
  padding-top: 3px;                  /* å¾®è°ƒå¯¹é½ */
  opacity: var(--time-opacity-old);
  transition: opacity var(--transition-slow);
  position: relative;
  letter-spacing: 0.3px;             /* å¢åŠ å­—é—´è· */
  font-variant-numeric: tabular-nums; /* ç­‰å®½æ•°å­— */
}

.entry-item:hover .entry-time {
  opacity: var(--time-opacity-hover);
}

/* æ­£æ–‡å†…å®¹ - æ”¶çª„é—´è· */
.entry-content {
  flex: 1;
  margin-left: 20px;                 /* ä» 24px æ”¶çª„åˆ° 20px */
  padding-left: 28px;                /* ä» 32px æ”¶çª„åˆ° 28px */
  font-size: var(--font-size-content);  /* 16pxï¼Œå·²é™ä½ */
  line-height: var(--line-height-normal);
  color: var(--content-color-normal);
  white-space: pre-wrap;
  word-wrap: break-word;
  position: relative;
}

/* çŸ­å¥æ ·å¼ï¼ˆé€šè¿‡ JS åŠ¨æ€æ·»åŠ  classï¼‰*/
.entry-item--short .entry-content {
  color: var(--content-color-short);
  line-height: var(--line-height-short);
}

.entry-item--short {
  margin-bottom: var(--entry-spacing-short);
}

/* é•¿æ–‡æ ·å¼ï¼ˆé€šè¿‡ JS åŠ¨æ€æ·»åŠ  classï¼‰*/
.entry-item--long {
  margin-bottom: var(--entry-spacing-long);
}

/* ç¼–è¾‘å™¨é®ç½©å±‚ */
.editor-overlay {
  display: none; /* é»˜è®¤éšè— */
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: var(--color-bg-overlay);
  z-index: 200;
  animation: fadeIn var(--transition-normal);
}

.editor-overlay.active {
  display: flex;
  justify-content: center;
  align-items: center;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* ç¼–è¾‘å™¨å®¹å™¨ */
.editor-container {
  width: 90%;
  max-width: 600px;
  max-height: 85vh;  /* ä¼˜åŒ–ï¼š80vh â†’ 85vh */
  background-color: #ffffff;
  border-radius: 8px;
  display: flex;
  flex-direction: column;
  animation: slideUp var(--transition-normal);
  overflow: hidden;  /* ç¡®ä¿å†…å®¹ä¸æº¢å‡º */
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.editor-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--spacing-sm) var(--spacing-md);
  border-bottom: 1px solid var(--color-divider);
}

.btn-close {
  font-size: 28px;
  color: var(--color-text-secondary);
  line-height: 1;
}

.editor-time {
  font-size: var(--font-size-time);
  color: var(--color-text-secondary);
}

.editor-textarea {
  /* ä¸ä½¿ç”¨ flex: 1ï¼Œæ”¹ä¸ºè‡ªé€‚åº”é«˜åº¦ */
  min-height: 80px;                 /* æœ€å°é«˜åº¦ï¼ˆçº¦ 2-3 è¡Œï¼‰*/
  max-height: 480px;                /* æœ€å¤§é«˜åº¦ï¼ˆçº¦ 16 è¡Œï¼‰*/
  padding: var(--spacing-md);
  font-size: var(--font-size-content);
  line-height: var(--line-height-content);
  overflow-y: hidden;               /* é»˜è®¤éšè—æ»šåŠ¨æ¡ */
  transition: none;                 /* ä¸ä½¿ç”¨åŠ¨ç”»ï¼Œä¿æŒå®‰é™ */
  resize: none;                     /* ç¦æ­¢æ‰‹åŠ¨æ‹–æ‹½è°ƒæ•´å¤§å° */
}

/* ç¼–è¾‘å™¨ focusï¼šå…‹åˆ¶çš„åé¦ˆ */
.editor-textarea:focus {
  outline: none;
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.06);
}

.editor-footer {
  display: flex;
  justify-content: space-between;
  padding: var(--spacing-sm) var(--spacing-md);
  border-top: 1px solid var(--color-divider);
}

.btn-delete {
  font-size: 14px;
  color: var(--color-text-tertiary);
}

.btn-delete:hover {
  color: #d32f2f;
}

.btn-save {
  font-size: 14px;
  color: var(--color-text-primary);
  font-weight: 500;
}

.btn-save:hover {
  opacity: 0.7;
}

/* å¹³æ¿ç«¯ä¼˜åŒ– */
@media (min-width: 768px) and (max-width: 1023px) {
  .timeline-container {
    padding: 0 var(--container-padding-tablet);
  }

  .header-container {
    padding: 0 var(--container-padding-tablet);
  }
}

/* ç§»åŠ¨ç«¯ä¼˜åŒ– */
@media (max-width: 767px) {
  .editor-container {
    width: 100%;
    max-width: 100%;
    max-height: 90vh;  /* ç§»åŠ¨ç«¯å¢åŠ åˆ° 90% */
    border-radius: 0;
  }

  .editor-textarea {
    max-height: calc(90vh - 120px); /* å‡å» header å’Œ footer é«˜åº¦ */
  }

  .entry-content {
    font-size: 15px;
  }

  /* ç§»åŠ¨ç«¯ï¼šå¢åŠ ç‚¹å‡»çƒ­åŒº */
  .entry-item {
    padding: 12px 8px;
    margin-left: -8px;
    margin-right: -8px;
  }
}

/* ========================================
   æ—¶é—´é”šç‚¹ï¼ˆé¡¶éƒ¨æ—¥æœŸå±•ç¤ºï¼‰
   ======================================== */
.time-anchor {
  position: fixed;
  top: var(--header-height);
  left: 0;
  right: 0;
  height: 64px;
  background-color: rgba(250, 250, 250, 0.85);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(232, 232, 232, 0.4);
  z-index: 90;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: opacity var(--transition-normal);
}

.time-anchor-container {
  display: flex;
  align-items: baseline;
  gap: 12px;
}

/* å¹´ä»½ï¼šæå¼±å­˜åœ¨æ„Ÿ */
.time-anchor-year {
  font-size: 11px;
  font-weight: 400;
  color: var(--color-text-tertiary);
  opacity: 0.4;
  letter-spacing: 0.5px;
  transition: opacity 300ms ease;  /* å¹´ä»½å˜åŒ–æ—¶çš„è¿‡æ¸¡ */
}

/* å¹´ä»½å˜åŒ–æ—¶çš„å¾®å¦™å¼ºè°ƒ */
.time-anchor-year--highlight {
  opacity: 1 !important;
}

/* æœˆ / æ—¥ï¼šè§†è§‰æ ¸å¿ƒ */
.time-anchor-primary {
  display: flex;
  align-items: baseline;
  font-size: 28px;
  font-weight: 300;
  color: var(--color-text-primary);
  letter-spacing: 0;
  line-height: 1;
}

.time-anchor-month,
.time-anchor-day {
  font-variant-numeric: tabular-nums;
}

.time-anchor-separator {
  font-size: 13px;
  font-weight: 400;
  opacity: 0.4;
  margin: 0 2px;
}

/* æ˜ŸæœŸï¼šè¾…åŠ©ä¿¡æ¯ */
.time-anchor-weekday {
  font-size: 12px;
  font-weight: 400;
  color: var(--color-text-secondary);
  opacity: 0.6;
  letter-spacing: 0.5px;
  margin-left: 8px;
}

/* ç§»åŠ¨ç«¯ä¼˜åŒ– */
@media (max-width: 767px) {
  .time-anchor {
    height: 56px;
  }

  .time-anchor-container {
    gap: 8px;
  }

  .time-anchor-year {
    font-size: 10px;
  }

  .time-anchor-primary {
    font-size: 24px;
  }

  .time-anchor-separator {
    font-size: 18px;
  }

  .time-anchor-weekday {
    font-size: 10px;
  }
}

/* ========================================
   åº•éƒ¨æµ®åŠ¨æ·»åŠ æŒ‰é’® - éšè—ï¼ˆæ”¹ä¸ºæ—¶é—´è½´æœ«å°¾è‡ªç„¶å»¶ç»­ï¼‰
   ======================================== */
.btn-add-float {
  display: none;  /* éšè—æ‚¬æµ®æŒ‰é’® */
}

/* ========================================
   æ—¶é—´è½´æœ«å°¾"ç»§ç»­ä¹¦å†™"åŒºåŸŸ - èå…¥å™äº‹çš„è‡ªç„¶å…¥å£
   ======================================== */

.timeline-continue-writing {
  margin-top: var(--spacing-3xl);    /* 80px ç•™ç™½ */
  padding: var(--spacing-2xl) 0;     /* 64px ä¸Šä¸‹å†…è¾¹è· */
  text-align: center;
  position: relative;
  cursor: pointer;
  transition: all var(--transition-slow);
}

/* æ—¶é—´çº¿å»¶ç»­ï¼ˆè™šçº¿å‘ä¸‹å»¶ä¼¸ï¼‰*/
.timeline-continue-writing::before {
  content: '';
  position: absolute;
  left: var(--timeline-offset);      /* 68pxï¼Œä¸è®°å½•çš„æ—¶é—´çº¿å¯¹é½ */
  top: 0;
  height: 60px;
  width: 1px;
  background: linear-gradient(
    to bottom,
    var(--timeline-color) 0%,
    transparent 100%
  );
  pointer-events: none;
}

/* "ç»§ç»­ä¹¦å†™"æ–‡å­— */
.continue-writing-text {
  font-size: 13px;
  font-weight: 400;
  color: var(--color-text-tertiary);
  opacity: 0.25;
  letter-spacing: 1px;
  transition: opacity var(--transition-slow);
}

.timeline-continue-writing:hover .continue-writing-text {
  opacity: 0.55;
}

/* å…‹åˆ¶çš„ + å·æ ‡è®° */
.continue-writing-icon {
  display: inline-block;
  width: 20px;
  height: 20px;
  margin-bottom: 12px;
  opacity: 0.2;
  transition: all var(--transition-normal);
}

.timeline-continue-writing:hover .continue-writing-icon {
  opacity: 0.4;
  transform: scale(1.1);
}

/* ç§»åŠ¨ç«¯ä¼˜åŒ– */
@media (max-width: 767px) {
  .btn-add-float {
    bottom: 24px;
    bottom: max(24px, env(safe-area-inset-bottom));
  }

  /* æ‰©å¤§ç‚¹å‡»åŒºåŸŸ */
  .btn-add-float::before {
    content: '';
    position: absolute;
    top: -8px;
    left: -8px;
    right: -8px;
    bottom: -8px;
  }
}

/* æ¨ªå±æ¨¡å¼ä¼˜åŒ– */
@media (orientation: landscape) and (max-width: 767px) {
  .btn-add-float {
    bottom: 16px;
  }
}

/* ========================================
   ç”Ÿå‘½æ—¥å†ï¼ˆå·¦ä¾§ï¼‰- å¼ºåŒ–"äººç”Ÿåˆ»åº¦å°º"éšå–»
   ======================================== */

.life-calendar {
  width: 300px;  /* å¢åŠ å®½åº¦ï¼Œå¼ºåŒ–å­˜åœ¨æ„Ÿ */
  flex-shrink: 0;
  position: sticky;
  top: calc(var(--header-height) + 64px + var(--spacing-3xl));
  align-self: flex-start;

  padding: 0 var(--spacing-lg);  /* å¢åŠ å†…è¾¹è· */
  max-height: calc(100vh - var(--header-height) - 64px - var(--spacing-3xl) - 40px);
  overflow-y: auto;

  /* éšè—æ»šåŠ¨æ¡ä½†ä¿ç•™æ»šåŠ¨åŠŸèƒ½ */
  scrollbar-width: none;  /* Firefox */
  -ms-overflow-style: none;  /* IE/Edge */
}

.life-calendar::-webkit-scrollbar {
  display: none;  /* Chrome/Safari */
}

/* æ€»æ ‡é¢˜ */
.life-calendar-header {
  margin-bottom: var(--spacing-lg);
  text-align: center;
}

.calendar-title {
  font-size: 10px;
  font-weight: 500;  /* å¢åŠ å­—é‡ */
  color: var(--color-text-tertiary);
  opacity: 0.4;  /* ç•¥å¾®å¢å¼º */
  letter-spacing: 1.5px;  /* æ‹‰å®½å­—è· */
  text-transform: uppercase;
}

/* ========================================
   å¹´é¾„å—
   ======================================== */
.age-section {
  margin-bottom: var(--spacing-lg);
}

.age-header {
  display: flex;
  align-items: baseline;
  gap: 6px;
  margin-bottom: 12px;
  padding-left: 4px;
}

/* å¹´é¾„ï¼ˆä¸»ä¿¡æ¯ï¼‰- å¼ºåŒ–åˆ»åº¦æ ‡ç­¾ */
.age-primary {
  font-size: 15px;  /* ä» 13px å¢åŠ åˆ° 15px */
  font-weight: 600;  /* ä» 500 å¢åŠ åˆ° 600 */
  color: var(--color-text-primary);
  opacity: 0.85;  /* ç•¥å¾®å¢å¼º */
  letter-spacing: 0.5px;
  transition: opacity var(--transition-normal);
}

/* å½“å‰å¹´é¾„é«˜äº® */
.age-primary--current {
  opacity: 1;
  color: var(--color-text-primary);
  position: relative;
}

.age-primary--current::after {
  content: '';
  position: absolute;
  left: -8px;
  top: 50%;
  transform: translateY(-50%);
  width: 3px;
  height: 12px;
  background: var(--color-text-primary);
  border-radius: 2px;
  opacity: 0.3;
}

/* å¹´ä»½ï¼ˆæ¬¡çº§ä¿¡æ¯ï¼‰*/
.age-secondary {
  font-size: 10px;
  font-weight: 400;
  color: var(--color-text-tertiary);
  opacity: 0.35;  /* ç•¥å¾®å¢å¼º */
  letter-spacing: 0.5px;
}

.age-calendar-grid {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

/* ========================================
   æ˜ŸæœŸå¤´éƒ¨
   ======================================== */
.calendar-weekday-header {
  display: grid;
  grid-template-columns: 28px repeat(7, 1fr);  /* å·¦ä¾§å‘¨æ•°å ä½ + 7å¤© */
  gap: 2px;
  margin-bottom: 8px;
  padding-bottom: 6px;
  border-bottom: 1px solid rgba(0, 0, 0, 0.04);
}

.week-number-cell {
  width: 28px;  /* ä¸å‘¨æ•°æ ‡ç­¾åŒå®½ */
}

.weekday-cell {
  font-size: 9px;
  font-weight: 400;
  color: var(--color-text-tertiary);
  opacity: 0.3;
  text-align: center;
  letter-spacing: 0.5px;
  text-transform: uppercase;
}

/* ========================================
   æ—¥å†ç½‘æ ¼ï¼ˆæ”¹ä¸ºè¡Œå¼å¸ƒå±€ï¼‰
   ======================================== */
.life-calendar-grid {
  display: flex;
  flex-direction: column;
  gap: 2px;
  padding-bottom: var(--spacing-xl);
}

/* ========================================
   å‘¨è¡Œï¼ˆæ¯è¡Œ = å‘¨æ•° + 7å¤©ï¼‰
   ======================================== */
.calendar-week-row {
  display: grid;
  grid-template-columns: 28px repeat(7, 1fr);  /* å·¦ä¾§å‘¨æ•° + 7å¤© */
  gap: 2px;
  align-items: center;
}

/* å½“å‰å‘¨æ‰€åœ¨è¡Œ - æè½»çš„äº®åº¦æå‡ */
.calendar-week-row--current {
  background-color: rgba(255, 255, 255, 0.02);
  border-radius: 3px;
  margin: 0 -4px;
  padding: 0 4px;
}

/* æµ…è‰²æ¨¡å¼ä¸‹å½“å‰è¡Œé«˜äº® */
:root:not([data-theme="dark"]) .calendar-week-row--current {
  background-color: rgba(0, 0, 0, 0.02);
}

@media (prefers-color-scheme: light) {
  :root:not([data-theme]) .calendar-week-row--current,
  :root[data-theme="auto"] .calendar-week-row--current {
    background-color: rgba(0, 0, 0, 0.02);
  }
}

[data-theme="light"] .calendar-week-row--current {
  background-color: rgba(0, 0, 0, 0.02) !important;
}

/* å‘¨æ•°æ ‡ç­¾ */
.week-number {
  width: 28px;
  font-size: 9px;
  font-weight: 400;
  color: var(--color-text-tertiary);
  opacity: 0.2;
  text-align: right;
  padding-right: 6px;
  letter-spacing: 0.5px;
}

/* ========================================
   æ—¥æœŸæ–¹å—ï¼ˆä¿æŒåŸæœ‰æ ·å¼ï¼‰
   ======================================== */
.calendar-day {
  width: 100%;
  aspect-ratio: 1;
  background-color: rgba(0, 0, 0, 0.04);
  border-radius: 2px;
  transition: background-color var(--transition-normal),
              transform var(--transition-fast),
              opacity var(--transition-slow);
  cursor: default;
  position: relative;
  opacity: 0.85;  /* è¿‡å»æœˆä»½ç•¥å¾®è¤ªè‰² */
}

/* ç©ºç™½æ–¹å—ï¼ˆç”¨äºå¯¹é½æ˜ŸæœŸæˆ–æœªæ¥æ—¥æœŸï¼‰*/
.calendar-day--empty {
  background-color: transparent;
  cursor: default;
  pointer-events: none;
  opacity: 0.3;
}

/* å½“å‰æœˆçš„æ–¹å— */
.calendar-day--current-month {
  opacity: 1;
}

/* æœ‰è®°å½•çš„æ—¥å­ */
.calendar-day--recorded {
  background-color: rgba(0, 0, 0, 0.15);
}

/* ä»Šå¤© */
.calendar-day--today {
  background-color: var(--color-text-primary);
  border: 1px solid rgba(255, 255, 255, 0.3);
  box-sizing: border-box;
  opacity: 1 !important;  /* ä»Šå¤©å§‹ç»ˆå…¨äº® */
  box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.15);  /* å†…å‘å…‰å¢å¼ºé”šç‚¹æ„Ÿ */
}

/* ä»Šå¤© + æœ‰è®°å½• */
.calendar-day--today.calendar-day--recorded {
  background-color: var(--color-text-primary);
}

/* Hover æ•ˆæœï¼šå¾®å¾®æ”¾å¤§ */
.calendar-day:hover:not(.calendar-day--empty) {
  transform: scale(1.15);
  background-color: rgba(0, 0, 0, 0.25);
}

/* å½“å‰é˜…è¯»çš„æ—¥æœŸï¼šè½»å¾®é«˜äº®ï¼ˆå¿ƒç†è”åŠ¨ï¼‰*/
.calendar-day--active {
  background-color: rgba(0, 0, 0, 0.30);
  transition: background-color 600ms ease;  /* ææ…¢è¿‡æ¸¡ï¼Œè¥é€ å‘¼å¸æ„Ÿ */
  position: relative;
}

/* active é todayï¼šæ·»åŠ å¤–å‘å…‰å¢å¼ºç„¦ç‚¹æ„Ÿ */
.calendar-day--active:not(.calendar-day--today) {
  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.2);
}

.calendar-day--active.calendar-day--recorded {
  background-color: rgba(0, 0, 0, 0.35);
}

.calendar-day--active.calendar-day--recorded:not(.calendar-day--today) {
  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.25);
}

.calendar-day--today.calendar-day--active {
  background-color: var(--color-text-primary);
}

/* ğŸ†• è”åŠ¨æ—¶çš„å¾®å¦™è„‰åŠ¨ï¼ˆä»…åœ¨æ¿€æ´»ç¬é—´ï¼‰*/
@keyframes calendarPulse {
  0% {
    box-shadow: 0 0 0 0 rgba(0, 0, 0, 0.3);
  }
  50% {
    box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.1);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(0, 0, 0, 0);
  }
}

.calendar-day--active {
  animation: calendarPulse 800ms ease-out;
}


/* ========================================
   å¹´ä»½åˆ†éš”ç¬¦ï¼ˆè°ƒæ•´ä¸ºå…¨å®½ï¼‰
   ======================================== */
.calendar-year-divider {
  height: 32px;
  position: relative;
  display: flex;
  align-items: center;
  margin: 8px 0;
}

.calendar-year-divider::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 32px;  /* è·³è¿‡å‘¨æ•°åˆ— */
  right: 0;
  height: 1px;
  background: rgba(0, 0, 0, 0.04);
}

/* ========================================
   æœˆä»½ç¬¬ä¸€å¤©æ ‡è®°ï¼ˆéšæ€§èŠ‚å¥ï¼‰- å¢å¼ºæ ‡è¯†
   ======================================== */
.calendar-day--month-start::before {
  content: '';
  position: absolute;
  left: 0;
  top: 15%;
  bottom: 15%;
  width: 2.5px;  /* ä» 2px å¢åŠ åˆ° 2.5px */
  background-color: rgba(0, 0, 0, 0.20);  /* ä» 0.15 å¢åŠ åˆ° 0.20 */
  border-radius: 0 1px 1px 0;
}

/* ========================================
   ç‰¹æ®Šæ—¥æœŸæ ‡è®°ï¼ˆä¸‰ä¸ªå±‚çº§ + ç³»ç»Ÿçº§ç”Ÿæ—¥ï¼‰
   ======================================== */

/* ç³»ç»Ÿçº§ï¼šç”Ÿæ—¥ï¼ˆBirthdayï¼‰- æ—¶é—´åŸç‚¹ï¼Œæœ€é«˜ä¼˜å…ˆçº§ */
.calendar-day--birthday {
  /* è¾¹æ¡†ï¼šé›é’è‰²ï¼ˆæ·±è“ï¼‰ï¼Œ2px */
  border: 2px solid var(--color-birthday);
  box-sizing: border-box;

  /* èƒŒæ™¯ï¼šæ·¡é›é’è‰²ç‚¹ç¼€ */
  background-color: var(--color-birthday-bg) !important;

  /* è¿‡æ¸¡ */
  transition: all var(--transition-normal);
}

/* ç”Ÿæ—¥ hoverï¼šè¾¹æ¡†åŠ æ·±ï¼ŒèƒŒæ™¯ç•¥æ·± */
.calendar-day--birthday:hover {
  border-color: rgba(47, 79, 108, 0.9);
  background-color: rgba(47, 79, 108, 0.18) !important;
  box-shadow: 0 0 0 1px rgba(47, 79, 108, 0.15);  /* å¾®å¦™å¤–æ™• */
}

/* ç”Ÿæ—¥ + æœ‰è®°å½•ï¼šèƒŒæ™¯åŠ æ·± */
.calendar-day--birthday.calendar-day--recorded {
  background-color: rgba(47, 79, 108, 0.20) !important;
}

/* ç”Ÿæ—¥ + ä»Šå¤©ï¼šç‰¹æ®Šç»„åˆ */
.calendar-day--birthday.calendar-day--today {
  background-color: var(--color-text-primary) !important;
  border-color: var(--color-birthday);
  box-shadow: inset 0 0 0 1px rgba(47, 79, 108, 0.3);
}

/* å±‚çº§ 1ï¼šçºªå¿µæ—¥ï¼ˆAnniversaryï¼‰- äººç”Ÿé‡è¦èŠ‚ç‚¹ */
.calendar-day--anniversary {
  /* è¾¹æ¡†ï¼šæš–æ£•è‰²ï¼ˆç¥ç€ï¼‰ï¼Œ1.5px */
  border: 1.5px solid var(--color-anniversary);
  box-sizing: border-box;

  /* èƒŒæ™¯ï¼šæ·¡æš–æ£•è‰²ç‚¹ç¼€ */
  background-color: var(--color-anniversary-bg) !important;

  /* è¿‡æ¸¡ */
  transition: all var(--transition-normal);
}

/* çºªå¿µæ—¥ hoverï¼šè¾¹æ¡†åŠ æ·±ï¼ŒèƒŒæ™¯ç•¥æ·± */
.calendar-day--anniversary:hover {
  border-color: rgba(139, 99, 56, 0.85);
  background-color: rgba(139, 99, 56, 0.14) !important;
  box-shadow: 0 0 0 1px rgba(139, 99, 56, 0.12);  /* å¾®å¦™å¤–æ™• */
}

/* çºªå¿µæ—¥ + æœ‰è®°å½•ï¼šèƒŒæ™¯åŠ æ·± */
.calendar-day--anniversary.calendar-day--recorded {
  background-color: rgba(139, 99, 56, 0.16) !important;
}

/* çºªå¿µæ—¥ + ä»Šå¤©ï¼šç‰¹æ®Šç»„åˆ */
.calendar-day--anniversary.calendar-day--today {
  background-color: var(--color-text-primary) !important;
  border-color: var(--color-anniversary);
  box-shadow: inset 0 0 0 1px rgba(139, 99, 56, 0.3);
}

/* å±‚çº§ 2ï¼šæ™®é€šç‰¹æ®Šæ—¥æœŸï¼ˆSpecialï¼‰- å€¼å¾—æ ‡è®°ä½†éèŠ‚ç‚¹ */
.calendar-day--special::after {
  content: '';
  position: absolute;
  top: 2px;
  right: 2px;
  width: 2px;
  height: 2px;
  background-color: rgba(0, 0, 0, 0.4);
  border-radius: 50%;
  transition: all var(--transition-normal);
}

/* hover æ—¶åœ†ç‚¹ç•¥å¾®å¢å¤§ */
.calendar-day--special:hover::after {
  width: 3px;
  height: 3px;
  top: 1.5px;
  right: 1.5px;
  background-color: rgba(0, 0, 0, 0.6);
}

/* ========================================
   å“åº”å¼ï¼šå¹³æ¿ç«¯
   ======================================== */
@media (min-width: 768px) and (max-width: 1023px) {
  .life-calendar {
    width: 220px;
  }

  .calendar-weekday-header,
  .calendar-week-row {
    grid-template-columns: 24px repeat(7, 1fr);
  }

  .week-number-cell,
  .week-number {
    width: 24px;
    font-size: 8px;
    padding-right: 4px;
  }

  .weekday-cell {
    font-size: 8px;
  }
}

/* ========================================
   å“åº”å¼ï¼šç§»åŠ¨ç«¯ï¼ˆéšè—å·¦ä¾§æ—¥å†ï¼‰
   ======================================== */
@media (max-width: 767px) {
  .life-calendar {
    display: none;
  }
}

/* ========================================
   ç©ºæ—¥æœŸæç¤ºï¼ˆæ—¶é—´ç©¿æ¢­åçš„è½»é‡çº§åé¦ˆï¼‰
   ======================================== */
.empty-date-hint {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 250;

  padding: 16px 24px;
  background-color: rgba(0, 0, 0, 0.75);
  color: #ffffff;

  font-size: 14px;
  font-weight: 400;
  letter-spacing: 0.5px;

  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);

  opacity: 1;
  transition: opacity 300ms ease;
  pointer-events: none;
}

.empty-date-hint--fade-out {
  opacity: 0;
}

/* ========================================
   å³é”®ä¸Šä¸‹æ–‡èœå•ï¼ˆç‰¹æ®Šæ—¥æœŸæ ‡è®°ï¼‰
   ======================================== */

/* èœå•å®¹å™¨ */
.context-menu {
  position: fixed;
  z-index: 300;
  background-color: #ffffff;
  border-radius: 8px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12),
              0 2px 8px rgba(0, 0, 0, 0.08);
  padding: 8px 0;
  min-width: 240px;
  max-width: 320px;
  opacity: 0;
  transform: scale(0.95);
  transition: opacity var(--transition-fast),
              transform var(--transition-fast);
}

.context-menu.active {
  opacity: 1;
  transform: scale(1);
}

/* èœå•å¤´éƒ¨ï¼ˆæ˜¾ç¤ºæ—¥æœŸï¼‰*/
.context-menu-header {
  padding: 12px 16px 8px;
  border-bottom: 1px solid var(--color-divider);
  margin-bottom: 4px;
}

.context-menu-date {
  font-size: 11px;
  font-weight: 500;
  color: var(--color-text-secondary);
  opacity: 0.6;
  letter-spacing: 0.5px;
}

/* èœå•é¡¹ */
.context-menu-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 16px;
  cursor: pointer;
  transition: background-color var(--transition-fast);
  border: none;
  background: none;
  width: 100%;
  text-align: left;
}

.context-menu-item:hover {
  background-color: rgba(0, 0, 0, 0.04);
}

.context-menu-item:active {
  background-color: rgba(0, 0, 0, 0.06);
}

/* èœå•é¡¹å›¾æ ‡ */
.context-menu-icon {
  width: 20px;
  height: 20px;
  font-size: 16px;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* èœå•é¡¹æ–‡æœ¬åŒºåŸŸ */
.context-menu-text {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.context-menu-label {
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text-primary);
  line-height: 1.3;
}

.context-menu-description {
  font-size: 11px;
  color: var(--color-text-tertiary);
  opacity: 0.7;
  line-height: 1.3;
}

/* åˆ†éš”çº¿ */
.context-menu-divider {
  height: 1px;
  background-color: var(--color-divider);
  margin: 4px 0;
}

/* è¿”å›æŒ‰é’® */
.context-menu-back {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 16px;
  font-size: 12px;
  color: var(--color-text-secondary);
  cursor: pointer;
  border-bottom: 1px solid var(--color-divider);
  margin-bottom: 4px;
  transition: background-color var(--transition-fast);
}

.context-menu-back:hover {
  background-color: rgba(0, 0, 0, 0.02);
}

/* å±é™©æ“ä½œï¼ˆåˆ é™¤ï¼‰*/
.context-menu-item--danger .context-menu-label {
  color: #d32f2f;
}

.context-menu-item--danger:hover {
  background-color: rgba(211, 47, 47, 0.04);
}

/* æ¨¡æ¿é€‰é¡¹å³ä¾§ç®­å¤´ */
.context-menu-arrow {
  font-size: 12px;
  color: var(--color-text-tertiary);
  opacity: 0.4;
}

/* ========================================
   äººç”ŸèŠ‚ç‚¹å›é¡¾æ¨¡å¼
   ======================================== */

/* æ—¶é—´è½´å®¹å™¨ï¼ˆå›é¡¾æ¨¡å¼ï¼‰*/
.timeline-container--review-mode {
  max-width: 560px !important;
  margin: 0 auto;
  padding-top: 120px !important;
  padding-bottom: 120px !important;
  opacity: 0;
  transition: opacity 300ms ease;
}

.timeline-container--review-mode.active {
  opacity: 1;
}

/* èŠ‚ç‚¹é—´çš„æ—¶é—´ç•™ç™½ï¼ˆè¡¨è¾¾"æœªæ ‡è®°çš„æ—¶é—´æµ"ï¼‰*/
.review-node-spacer {
  height: 160px;
  position: relative;
}

/* æ—¶é—´æµåŠ¨çš„éšå–»ï¼šå‚ç›´è™šçº¿ */
.review-node-spacer::before {
  content: '';
  position: absolute;
  left: 50%;
  top: 0;
  bottom: 0;
  width: 1px;
  background: linear-gradient(
    to bottom,
    transparent 0%,
    rgba(0, 0, 0, 0.06) 20%,
    rgba(0, 0, 0, 0.06) 80%,
    transparent 100%
  );
}

/* èŠ‚ç‚¹å®¹å™¨ */
.review-node {
  position: relative;
  cursor: pointer;
  transition: all var(--transition-normal);
  margin-bottom: 0;
}

.review-node:hover {
  transform: scale(1.02);
}

/* èŠ‚ç‚¹å†…å®¹åŒº */
.review-node-content {
  text-align: center;
  padding: 40px 24px;
  position: relative;
  transition: all var(--transition-normal);
}

/* å¹´ä»½/å¹´é¾„ï¼ˆå¼±ä¿¡æ¯ï¼Œææ·¡ï¼‰*/
.review-node-meta {
  font-size: 11px;
  font-weight: 400;
  color: var(--color-text-tertiary);
  opacity: 0.25;
  letter-spacing: 1px;
  margin-bottom: 16px;
  text-transform: uppercase;
}

/* èŠ‚ç‚¹æ ‡é¢˜ï¼ˆæ ¸å¿ƒä¿¡æ¯ï¼‰*/
.review-node-title {
  font-size: 20px;
  font-weight: 300;
  color: var(--color-text-primary);
  letter-spacing: 0.5px;
  margin-bottom: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

.review-node-icon {
  font-size: 24px;
}

.review-node-label {
  /* æ ¸å¿ƒæ ‡ç­¾ */
}

/* æœ‰æ—¥è®°æ ‡è®°ï¼ˆå³ä¾§å°åœ†ç‚¹ï¼‰*/
.review-node-entry-indicator {
  font-size: 8px;
  color: var(--color-text-primary);
  opacity: 0.3;
  margin-left: 4px;
}

/* æ—¥æœŸ */
.review-node-date {
  font-size: 13px;
  font-weight: 400;
  color: var(--color-text-secondary);
  opacity: 0.5;
  letter-spacing: 0.5px;
  margin-bottom: 16px;
}

/* å¯é€‰æè¿° */
.review-node-description {
  font-size: 12px;
  color: var(--color-text-tertiary);
  opacity: 0.6;
  line-height: 1.6;
  max-width: 360px;
  margin: 0 auto;
}

/* ========================================
   èŠ‚ç‚¹è¾¹æ¡†ï¼ˆå±‚çº§è¡¨è¾¾ï¼‰
   ======================================== */

/* ç³»ç»Ÿçº§ï¼šç”Ÿæ—¥ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰*/
.review-node--birthday .review-node-content {
  border: 2px solid var(--color-birthday);
  border-radius: 4px;
  background-color: var(--color-birthday-bg);
}

.review-node--birthday .review-node-title {
  font-size: 22px;
  font-weight: 400;
}

/* å±‚çº§ 1ï¼šé‡å¤§é‡Œç¨‹ç¢‘ */
.review-node--major .review-node-content {
  border: 1.5px solid var(--color-anniversary);
  border-radius: 4px;
  background-color: var(--color-anniversary-bg);
}

/* å±‚çº§ 2ï¼šçºªå¿µæ—¥ */
.review-node--milestone .review-node-content {
  border: 1px solid rgba(139, 99, 56, 0.4);
  border-radius: 4px;
  background-color: rgba(139, 99, 56, 0.03);
}

/* Hover æ•ˆæœ */
.review-node:hover .review-node-content {
  box-shadow: 0 0 0 4px rgba(0, 0, 0, 0.03);
}

/* æ¿€æ´»çŠ¶æ€ï¼ˆç‚¹å‡»åé«˜äº®ï¼‰*/
.review-node--active .review-node-content {
  box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.12);
  transform: scale(1.02);
}

/* ========================================
   å·¦ä¾§æ—¥å†åœ¨å›é¡¾æ¨¡å¼çš„å˜åŒ–
   ======================================== */

/* å›é¡¾æ¨¡å¼ï¼šæ·¡åŒ–æœªæ ‡è®°æ—¥æœŸ */
.life-calendar--review-mode .calendar-day:not(.calendar-day--birthday):not(.calendar-day--anniversary) {
  opacity: 0.05 !important;
  pointer-events: none;
}

/* å›é¡¾æ¨¡å¼ï¼šæ ‡è®°æ—¥æœŸä¿æŒæ­£å¸¸ */
.life-calendar--review-mode .calendar-day--birthday,
.life-calendar--review-mode .calendar-day--anniversary {
  opacity: 1 !important;
  pointer-events: all;
}

/* å›é¡¾æ¨¡å¼ï¼šéšè—å‘¨æ•°å’Œæ˜ŸæœŸå¤´ */
.life-calendar--review-mode .week-number {
  opacity: 0.1;
}

.life-calendar--review-mode .calendar-weekday-header {
  opacity: 0.3;
}

/* ========================================
   æ¨¡å¼åˆ‡æ¢æ·¡å…¥æ·¡å‡ºåŠ¨ç”»
   ======================================== */

.timeline-container--fade-out {
  opacity: 0 !important;
  transition: opacity 300ms ease;
}

.timeline-container--fade-in {
  opacity: 1 !important;
  transition: opacity 800ms ease;
}

/* ========================================
   æ·±è‰²æ¨¡å¼ç‰¹æ®Šæ ·å¼è°ƒæ•´
   æ”¯æŒä¸¤ç§è§¦å‘æ–¹å¼ï¼š
   1. ç³»ç»Ÿè‡ªåŠ¨ï¼š@media (prefers-color-scheme: dark)
   2. æ‰‹åŠ¨åˆ‡æ¢ï¼š[data-theme="dark"]
   ======================================== */

@media (prefers-color-scheme: dark) {
  /* ========== é¡¶éƒ¨å¯¼èˆªæ  ========== */
  .app-header {
    background-color: rgba(15, 18, 20, 0.9);  /* ä½¿ç”¨æ·±è‰²ä¸»èƒŒæ™¯ */
    border-bottom-color: rgba(255, 255, 255, 0.08);
  }

  /* ========== æ—¶é—´é”šç‚¹ ========== */
  .time-anchor {
    background-color: rgba(15, 18, 20, 0.85);
    border-bottom-color: rgba(255, 255, 255, 0.06);
  }

  /* å¹´ä»½å˜åŒ–é«˜äº®æ—¶çš„è°ƒæ•´ */
  .time-anchor-year--highlight {
    opacity: 0.9 !important;  /* æ·±è‰²æ¨¡å¼ä¸‹ä¸éœ€è¦å®Œå…¨ä¸é€æ˜ */
  }

  /* ========== å¹´ä»½åˆ†éš”ç¬¦ï¼ˆæ°´å°éœ€è¦æ›´é€æ˜ä½†å¯æ„ŸçŸ¥ï¼‰========== */
  .year-divider-number {
    opacity: 0.06;  /* ä» 0.04 æå‡åˆ° 0.06ï¼Œæ¢å¤æ—¶é—´èŠ‚å¥æ„Ÿ */
    filter: blur(0.3px);  /* å¾®å¦™æ¨¡ç³Šï¼Œå¢å¼º"æ—¶é—´æ¨¡ç³Šæ„Ÿ" */
  }

  .year-divider:hover .year-divider-number {
    opacity: 0.10;  /* hover æ—¶ä¹Ÿä¿æŒå…‹åˆ¶ */
  }

  @keyframes yearFadeIn {
    to {
      opacity: 0.06;
    }
  }

  /* ========== æŒ‰é’®æ ·å¼è°ƒæ•´ ========== */
  .btn-mode-toggle {
    border-color: rgba(255, 255, 255, 0.12);
  }

  .btn-mode-toggle:hover {
    border-color: rgba(255, 255, 255, 0.20);
    background-color: rgba(255, 255, 255, 0.04);
  }

  /* ========== ç¼–è¾‘å™¨ ========== */
  .editor-container {
    background-color: var(--color-bg-elevated-2);  /* ä½¿ç”¨äºŒçº§æŠ¬å‡èƒŒæ™¯ */
  }

  .editor-header,
  .editor-footer {
    border-color: rgba(255, 255, 255, 0.08);
  }

  .editor-textarea {
    background-color: var(--color-bg-elevated-2);
    color: var(--color-text-primary);
  }

  .editor-textarea::placeholder {
    color: var(--color-text-tertiary);
    opacity: 0.5;
  }

  .editor-textarea:focus {
    box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.12);
  }

  /* ========== æ—¥æœŸåˆ†ç»„é«˜äº®èƒŒæ™¯ ========== */
  .date-group--active {
    background-color: rgba(255, 255, 255, 0.03);
  }

  /* ========== å¤©æ°”é€‰æ‹©å™¨æ·±è‰²æ¨¡å¼å¢å¼º ========== */
  .weather-selector {
    opacity: 0.45;  /* æ·±è‰²æ¨¡å¼ä¸‹è¿›ä¸€æ­¥æå‡ */
  }

  .weather-selector:hover {
    opacity: 0.75;
  }

  .weather-selector[data-weather]:not([data-weather=""]) {
    opacity: 0.60;
  }

  .weather-selector[data-weather]:not([data-weather=""]):hover {
    opacity: 0.85;
  }

  .weather-icon {
    color: var(--color-text-primary);  /* æ·±è‰²æ¨¡å¼ä½¿ç”¨ä¸»æ–‡å­—è‰² */
  }

  /* ========== æ—¥æœŸåˆ†å‰²çº¿ï¼ˆæ·±è‰²æ¨¡å¼ä¸‹è™šçº¿éœ€è¦è°ƒæ•´ï¼‰========== */
  .date-divider {
    border-top-color: rgba(255, 255, 255, 0.08);
  }

  /* ========== ä¸Šä¸‹æ–‡èœå• ========== */
  .context-menu {
    background-color: var(--color-bg-elevated-2);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4),
                0 4px 12px rgba(0, 0, 0, 0.3);
  }

  .context-menu-header {
    border-bottom-color: rgba(255, 255, 255, 0.08);
  }

  .context-menu-item:hover {
    background-color: rgba(255, 255, 255, 0.06);
  }

  .context-menu-item:active {
    background-color: rgba(255, 255, 255, 0.08);
  }

  .context-menu-divider {
    background-color: rgba(255, 255, 255, 0.08);
  }

  .context-menu-back {
    border-bottom-color: rgba(255, 255, 255, 0.08);
  }

  .context-menu-back:hover {
    background-color: rgba(255, 255, 255, 0.03);
  }

  /* å±é™©æ“ä½œçš„æ·±è‰²é€‚é… */
  .context-menu-item--danger:hover {
    background-color: rgba(211, 47, 47, 0.12);
  }

  /* ========== ç©ºçŠ¶æ€æç¤º ========== */
  .empty-date-hint {
    background-color: rgba(232, 224, 213, 0.15);  /* ä½¿ç”¨æš–è‰²åŠé€æ˜ */
    color: var(--color-text-primary);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
  }

  /* ========== å›é¡¾æ¨¡å¼èŠ‚ç‚¹ ========== */
  .review-node-spacer::before {
    background: linear-gradient(
      to bottom,
      transparent 0%,
      rgba(255, 255, 255, 0.04) 20%,
      rgba(255, 255, 255, 0.04) 80%,
      transparent 100%
    );
  }

  /* å›é¡¾æ¨¡å¼èŠ‚ç‚¹ hover æ•ˆæœ */
  .review-node:hover .review-node-content {
    box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.04);
  }

  .review-node--active .review-node-content {
    box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.15);
  }

  /* ========================================
     ç”Ÿå‘½æ—¥å†æ·±è‰²æ¨¡å¼ä¼˜åŒ–
     ======================================== */

  /* æ—¥å†æ–¹å—åŸºç¡€æ ·å¼ - ä½¿ç”¨äº®è‰²ç³»ç»Ÿ */
  .calendar-day {
    background-color: rgba(255, 255, 255, 0.06);  /* ç©ºç™½æ—¥å­ï¼šå¾®å¦™çš„äº®æ–¹å— */
  }

  .calendar-day--empty {
    background-color: transparent;
    opacity: 0.4;
  }

  /* æœ‰è®°å½•çš„æ—¥å­ - æ›´äº® */
  .calendar-day--recorded {
    background-color: rgba(255, 255, 255, 0.20);
  }

  /* ä»Šå¤© - ä½¿ç”¨æš–ç™½è‰²é«˜äº® */
  .calendar-day--today {
    background-color: var(--color-text-primary);  /* æš–ç™½è‰² */
    border-color: rgba(0, 0, 0, 0.2);
    box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.1);  /* å†…å‘å…‰å¢å¼ºé”šç‚¹æ„Ÿ */
  }

  .calendar-day--today.calendar-day--recorded {
    background-color: var(--color-text-primary);
  }

  /* Hover æ•ˆæœ */
  .calendar-day:hover:not(.calendar-day--empty) {
    background-color: rgba(255, 255, 255, 0.30);
  }

  /* å½“å‰é˜…è¯»çš„æ—¥æœŸé«˜äº® */
  .calendar-day--active {
    background-color: rgba(255, 255, 255, 0.35);
  }

  /* active é todayï¼šæ·»åŠ å¤–å‘å…‰å¢å¼ºç„¦ç‚¹æ„Ÿ */
  .calendar-day--active:not(.calendar-day--today) {
    box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.2);
  }

  .calendar-day--active.calendar-day--recorded {
    background-color: rgba(255, 255, 255, 0.40);
  }

  .calendar-day--active.calendar-day--recorded:not(.calendar-day--today) {
    box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.25);
  }

  .calendar-day--today.calendar-day--active {
    background-color: var(--color-text-primary);
  }

  /* è„‰åŠ¨åŠ¨ç”»è°ƒæ•´ */
  @keyframes calendarPulse {
    0% {
      box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.3);
    }
    50% {
      box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.1);
    }
    100% {
      box-shadow: 0 0 0 0 rgba(255, 255, 255, 0);
    }
  }

  /* å¹´ä»½åˆ†éš”çº¿ */
  .calendar-year-divider::before {
    background: rgba(255, 255, 255, 0.06);
  }

  /* æœˆä»½ç¬¬ä¸€å¤©æ ‡è®° */
  .calendar-day--month-start::before {
    background-color: rgba(255, 255, 255, 0.25);
  }

  /* ç‰¹æ®Šæ—¥æœŸ - ç”Ÿæ—¥ï¼ˆé›é’è¾¹æ¡†åœ¨æ·±è‰²ä¸‹éœ€è¦è°ƒæ•´ï¼‰*/
  .calendar-day--birthday {
    border-color: var(--color-birthday);
    background-color: var(--color-birthday-bg) !important;
  }

  .calendar-day--birthday:hover {
    border-color: #8db0d0;  /* hover æ—¶æ›´äº®çš„é›é’ */
    background-color: rgba(122, 155, 184, 0.20) !important;
    box-shadow: 0 0 0 1px rgba(122, 155, 184, 0.20);
  }

  .calendar-day--birthday.calendar-day--recorded {
    background-color: rgba(122, 155, 184, 0.22) !important;
  }

  .calendar-day--birthday.calendar-day--today {
    background-color: var(--color-text-primary) !important;
    border-color: var(--color-birthday);
    box-shadow: inset 0 0 0 1px rgba(122, 155, 184, 0.4);
  }

  /* ç‰¹æ®Šæ—¥æœŸ - çºªå¿µæ—¥ï¼ˆæš–æ£•è¾¹æ¡†ï¼‰*/
  .calendar-day--anniversary {
    border-color: var(--color-anniversary);
    background-color: var(--color-anniversary-bg) !important;
  }

  .calendar-day--anniversary:hover {
    border-color: #cca97d;  /* hover æ—¶æ›´äº®çš„æš–æ£• */
    background-color: rgba(184, 148, 107, 0.18) !important;
    box-shadow: 0 0 0 1px rgba(184, 148, 107, 0.15);
  }

  .calendar-day--anniversary.calendar-day--recorded {
    background-color: rgba(184, 148, 107, 0.20) !important;
  }

  .calendar-day--anniversary.calendar-day--today {
    background-color: var(--color-text-primary) !important;
    border-color: var(--color-anniversary);
    box-shadow: inset 0 0 0 1px rgba(184, 148, 107, 0.4);
  }

  /* æ™®é€šç‰¹æ®Šæ—¥æœŸåœ†ç‚¹ */
  .calendar-day--special::after {
    background-color: rgba(255, 255, 255, 0.5);
  }

  .calendar-day--special:hover::after {
    background-color: rgba(255, 255, 255, 0.7);
  }

  /* æ˜ŸæœŸå¤´éƒ¨å’Œå‘¨æ•°æ ‡ç­¾ */
  .calendar-weekday-header {
    border-bottom-color: rgba(255, 255, 255, 0.06);
  }

  /* å›é¡¾æ¨¡å¼ä¸‹çš„æ—¥å†è°ƒæ•´ */
  .life-calendar--review-mode .calendar-day:not(.calendar-day--birthday):not(.calendar-day--anniversary) {
    opacity: 0.08 !important;  /* æ·±è‰²æ¨¡å¼ä¸‹ç¨å¾®æé«˜ä¸€ç‚¹ï¼Œé¿å…å®Œå…¨æ¶ˆå¤± */
  }

  /* ========== æ—¶é—´çº¿åœ†ç‚¹æ·±è‰²æ¨¡å¼å¢å¼º ========== */
  .entry-item::after {
    opacity: 0.40;  /* ä» 0.35 æå‡åˆ° 0.40 */
  }

  .entry-item:hover::after {
    opacity: 0.60;
  }
}

/* ========================================
   æ‰‹åŠ¨åˆ‡æ¢åˆ°æ·±è‰²æ¨¡å¼ [data-theme="dark"]
   ä¸ä¸Šé¢åª’ä½“æŸ¥è¯¢çš„æ ·å¼å®Œå…¨ä¸€è‡´
   ======================================== */

[data-theme="dark"] {
  /* ========== é¡¶éƒ¨å¯¼èˆªæ  ========== */
  .app-header {
    background-color: rgba(15, 18, 20, 0.9);
    border-bottom-color: rgba(255, 255, 255, 0.08);
  }

  /* ========== æ—¶é—´é”šç‚¹ ========== */
  .time-anchor {
    background-color: rgba(15, 18, 20, 0.85);
    border-bottom-color: rgba(255, 255, 255, 0.06);
  }

  .time-anchor-year--highlight {
    opacity: 0.9 !important;
  }

  /* ========== å¹´ä»½åˆ†éš”ç¬¦ ========== */
  .year-divider-number {
    opacity: 0.06;  /* ä» 0.04 æå‡åˆ° 0.06 */
    filter: blur(0.3px);
  }

  .year-divider:hover .year-divider-number {
    opacity: 0.10;
  }

  @keyframes yearFadeIn {
    to {
      opacity: 0.06;
    }
  }

  /* ========== æŒ‰é’®æ ·å¼è°ƒæ•´ ========== */
  .btn-mode-toggle,
  .btn-theme-toggle {
    border-color: rgba(255, 255, 255, 0.12);
  }

  .btn-mode-toggle:hover,
  .btn-theme-toggle:hover {
    border-color: rgba(255, 255, 255, 0.20);
    background-color: rgba(255, 255, 255, 0.04);
  }

  /* ========== ç¼–è¾‘å™¨ ========== */
  .editor-container {
    background-color: var(--color-bg-elevated-2);
  }

  .editor-header,
  .editor-footer {
    border-color: rgba(255, 255, 255, 0.08);
  }

  .editor-textarea {
    background-color: var(--color-bg-elevated-2);
    color: var(--color-text-primary);
  }

  .editor-textarea::placeholder {
    color: var(--color-text-tertiary);
    opacity: 0.5;
  }

  .editor-textarea:focus {
    box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.12);
  }

  /* ========== æ—¥æœŸåˆ†ç»„ ========== */
  .date-group--active {
    background-color: rgba(255, 255, 255, 0.03);
  }

  /* ========== å¤©æ°”é€‰æ‹©å™¨æ·±è‰²æ¨¡å¼å¢å¼º ========== */
  .weather-selector {
    opacity: 0.45;
  }

  .weather-selector:hover {
    opacity: 0.75;
  }

  .weather-selector[data-weather]:not([data-weather=""]) {
    opacity: 0.60;
  }

  .weather-selector[data-weather]:not([data-weather=""]):hover {
    opacity: 0.85;
  }

  .weather-icon {
    color: var(--color-text-primary);
  }

  .date-divider {
    border-top-color: rgba(255, 255, 255, 0.08);
  }

  /* ========== ä¸Šä¸‹æ–‡èœå• ========== */
  .context-menu {
    background-color: var(--color-bg-elevated-2);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4),
                0 4px 12px rgba(0, 0, 0, 0.3);
  }

  .context-menu-header {
    border-bottom-color: rgba(255, 255, 255, 0.08);
  }

  .context-menu-item:hover {
    background-color: rgba(255, 255, 255, 0.06);
  }

  .context-menu-item:active {
    background-color: rgba(255, 255, 255, 0.08);
  }

  .context-menu-divider {
    background-color: rgba(255, 255, 255, 0.08);
  }

  .context-menu-back {
    border-bottom-color: rgba(255, 255, 255, 0.08);
  }

  .context-menu-back:hover {
    background-color: rgba(255, 255, 255, 0.03);
  }

  .context-menu-item--danger:hover {
    background-color: rgba(211, 47, 47, 0.12);
  }

  /* ========== ç©ºçŠ¶æ€æç¤º ========== */
  .empty-date-hint {
    background-color: rgba(232, 224, 213, 0.15);
    color: var(--color-text-primary);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
  }

  /* ========== å›é¡¾æ¨¡å¼ ========== */
  .review-node-spacer::before {
    background: linear-gradient(
      to bottom,
      transparent 0%,
      rgba(255, 255, 255, 0.04) 20%,
      rgba(255, 255, 255, 0.04) 80%,
      transparent 100%
    );
  }

  .review-node:hover .review-node-content {
    box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.04);
  }

  .review-node--active .review-node-content {
    box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.15);
  }

  /* ========== ç”Ÿå‘½æ—¥å† ========== */
  .calendar-day {
    background-color: rgba(255, 255, 255, 0.06);
  }

  .calendar-day--empty {
    background-color: transparent;
    opacity: 0.4;
  }

  .calendar-day--recorded {
    background-color: rgba(255, 255, 255, 0.20);
  }

  .calendar-day--today {
    background-color: var(--color-text-primary);
    border-color: rgba(0, 0, 0, 0.2);
    box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.1);  /* å†…å‘å…‰å¢å¼ºé”šç‚¹æ„Ÿ */
  }

  .calendar-day--today.calendar-day--recorded {
    background-color: var(--color-text-primary);
  }

  .calendar-day:hover:not(.calendar-day--empty) {
    background-color: rgba(255, 255, 255, 0.30);
  }

  .calendar-day--active {
    background-color: rgba(255, 255, 255, 0.35);
  }

  /* active é todayï¼šæ·»åŠ å¤–å‘å…‰å¢å¼ºç„¦ç‚¹æ„Ÿ */
  .calendar-day--active:not(.calendar-day--today) {
    box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.2);
  }

  .calendar-day--active.calendar-day--recorded {
    background-color: rgba(255, 255, 255, 0.40);
  }

  .calendar-day--active.calendar-day--recorded:not(.calendar-day--today) {
    box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.25);
  }

  .calendar-day--today.calendar-day--active {
    background-color: var(--color-text-primary);
  }

  @keyframes calendarPulse {
    0% {
      box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.3);
    }
    50% {
      box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.1);
    }
    100% {
      box-shadow: 0 0 0 0 rgba(255, 255, 255, 0);
    }
  }

  .calendar-year-divider::before {
    background: rgba(255, 255, 255, 0.06);
  }

  .calendar-day--month-start::before {
    background-color: rgba(255, 255, 255, 0.25);
  }

  .calendar-day--birthday {
    border-color: var(--color-birthday);
    background-color: var(--color-birthday-bg) !important;
  }

  .calendar-day--birthday:hover {
    border-color: #8db0d0;
    background-color: rgba(122, 155, 184, 0.20) !important;
    box-shadow: 0 0 0 1px rgba(122, 155, 184, 0.20);
  }

  .calendar-day--birthday.calendar-day--recorded {
    background-color: rgba(122, 155, 184, 0.22) !important;
  }

  .calendar-day--birthday.calendar-day--today {
    background-color: var(--color-text-primary) !important;
    border-color: var(--color-birthday);
    box-shadow: inset 0 0 0 1px rgba(122, 155, 184, 0.4);
  }

  .calendar-day--anniversary {
    border-color: var(--color-anniversary);
    background-color: var(--color-anniversary-bg) !important;
  }

  .calendar-day--anniversary:hover {
    border-color: #cca97d;
    background-color: rgba(184, 148, 107, 0.18) !important;
    box-shadow: 0 0 0 1px rgba(184, 148, 107, 0.15);
  }

  .calendar-day--anniversary.calendar-day--recorded {
    background-color: rgba(184, 148, 107, 0.20) !important;
  }

  .calendar-day--anniversary.calendar-day--today {
    background-color: var(--color-text-primary) !important;
    border-color: var(--color-anniversary);
    box-shadow: inset 0 0 0 1px rgba(184, 148, 107, 0.4);
  }

  .calendar-day--special::after {
    background-color: rgba(255, 255, 255, 0.5);
  }

  .calendar-day--special:hover::after {
    background-color: rgba(255, 255, 255, 0.7);
  }

  .calendar-weekday-header {
    border-bottom-color: rgba(255, 255, 255, 0.06);
  }

  .life-calendar--review-mode .calendar-day:not(.calendar-day--birthday):not(.calendar-day--anniversary) {
    opacity: 0.08 !important;
  }

  /* ========== æ—¶é—´çº¿åœ†ç‚¹æ·±è‰²æ¨¡å¼å¢å¼º ========== */
  .entry-item::after {
    opacity: 0.40;
  }

  .entry-item:hover::after {
    opacity: 0.60;
  }
}

/* ========================================
   æ‰‹åŠ¨åˆ‡æ¢åˆ°æµ…è‰²æ¨¡å¼ [data-theme="light"]
   æ˜¾å¼å®šä¹‰æµ…è‰²æ ·å¼ï¼Œç¡®ä¿ä»æ·±è‰²åˆ‡æ¢å›æ¥æ—¶æ­£ç¡®æ˜¾ç¤º
   ======================================== */

[data-theme="light"] {
  /* ========== é¡¶éƒ¨å¯¼èˆªæ  ========== */
  .app-header {
    background-color: rgba(250, 250, 250, 0.9);
    border-bottom-color: var(--color-divider);
  }

  /* ========== æ—¶é—´é”šç‚¹ ========== */
  .time-anchor {
    background-color: rgba(250, 250, 250, 0.85);
    border-bottom-color: rgba(232, 232, 232, 0.4);
  }

  /* ========== æŒ‰é’®æ ·å¼ ========== */
  .btn-mode-toggle,
  .btn-theme-toggle {
    border-color: var(--color-divider) !important;
  }

  .btn-mode-toggle:hover,
  .btn-theme-toggle:hover {
    border-color: var(--color-text-tertiary) !important;
    background-color: rgba(0, 0, 0, 0.02) !important;
  }

  /* ========== ç¼–è¾‘å™¨ ========== */
  .editor-container {
    background-color: #ffffff !important;
  }

  .editor-header,
  .editor-footer {
    border-color: var(--color-divider) !important;
  }

  .editor-textarea {
    background-color: #ffffff !important;
    color: var(--color-text-primary) !important;
  }

  /* ========== ç¡®ä¿å¹´ä»½æ°´å°ä½¿ç”¨æµ…è‰²æ¨¡å¼çš„é€æ˜åº¦ ========== */
  .year-divider-number {
    opacity: 0.08 !important;
    filter: none !important;
  }

  .year-divider:hover .year-divider-number {
    opacity: 0.15 !important;
  }

  /* ========== ç”Ÿå‘½æ—¥å†æµ…è‰²æ¨¡å¼ ========== */
  .calendar-day {
    background-color: rgba(0, 0, 0, 0.04) !important;
    opacity: 0.85 !important;
  }

  .calendar-day--empty {
    background-color: transparent !important;
    opacity: 0.3 !important;
  }

  .calendar-day--current-month {
    opacity: 1 !important;
  }

  .calendar-day--recorded {
    background-color: rgba(0, 0, 0, 0.15) !important;
  }

  .calendar-day--today {
    background-color: var(--color-text-primary) !important;
    border: 1px solid rgba(255, 255, 255, 0.3) !important;
    box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.15) !important;  /* å†…å‘å…‰å¢å¼ºé”šç‚¹æ„Ÿ */
  }

  .calendar-day--today.calendar-day--recorded {
    background-color: var(--color-text-primary) !important;
  }

  .calendar-day:hover:not(.calendar-day--empty) {
    background-color: rgba(0, 0, 0, 0.25) !important;
  }

  .calendar-day--active {
    background-color: rgba(0, 0, 0, 0.30) !important;
  }

  /* active é todayï¼šæ·»åŠ å¤–å‘å…‰å¢å¼ºç„¦ç‚¹æ„Ÿ */
  .calendar-day--active:not(.calendar-day--today) {
    box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.2) !important;
  }

  .calendar-day--active.calendar-day--recorded {
    background-color: rgba(0, 0, 0, 0.35) !important;
  }

  .calendar-day--active.calendar-day--recorded:not(.calendar-day--today) {
    box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.25) !important;
  }

  .calendar-day--today.calendar-day--active {
    background-color: var(--color-text-primary) !important;
  }

  .calendar-day--month-start::before {
    background-color: rgba(0, 0, 0, 0.20) !important;
  }

  .calendar-day--birthday {
    border-color: var(--color-birthday) !important;
    background-color: var(--color-birthday-bg) !important;
  }

  .calendar-day--birthday:hover {
    border-color: rgba(47, 79, 108, 0.9) !important;
    background-color: rgba(47, 79, 108, 0.18) !important;
    box-shadow: 0 0 0 1px rgba(47, 79, 108, 0.15) !important;
  }

  .calendar-day--birthday.calendar-day--recorded {
    background-color: rgba(47, 79, 108, 0.20) !important;
  }

  .calendar-day--birthday.calendar-day--today {
    background-color: var(--color-text-primary) !important;
    border-color: var(--color-birthday) !important;
    box-shadow: inset 0 0 0 1px rgba(47, 79, 108, 0.3) !important;
  }

  .calendar-day--anniversary {
    border-color: var(--color-anniversary) !important;
    background-color: var(--color-anniversary-bg) !important;
  }

  .calendar-day--anniversary:hover {
    border-color: rgba(139, 99, 56, 0.85) !important;
    background-color: rgba(139, 99, 56, 0.14) !important;
    box-shadow: 0 0 0 1px rgba(139, 99, 56, 0.12) !important;
  }

  .calendar-day--anniversary.calendar-day--recorded {
    background-color: rgba(139, 99, 56, 0.16) !important;
  }

  .calendar-day--anniversary.calendar-day--today {
    background-color: var(--color-text-primary) !important;
    border-color: var(--color-anniversary) !important;
    box-shadow: inset 0 0 0 1px rgba(139, 99, 56, 0.3) !important;
  }

  .calendar-day--special::after {
    background-color: rgba(0, 0, 0, 0.4) !important;
  }

  .calendar-day--special:hover::after {
    background-color: rgba(0, 0, 0, 0.6) !important;
  }

  .calendar-year-divider::before {
    background: rgba(0, 0, 0, 0.04) !important;
  }

  .calendar-weekday-header {
    border-bottom-color: rgba(0, 0, 0, 0.04) !important;
  }

  .life-calendar--review-mode .calendar-day:not(.calendar-day--birthday):not(.calendar-day--anniversary) {
    opacity: 0.05 !important;
  }
}

/* ========================================
   å†™ä½œå…¥å£ - ç®€æ´çš„ä¹¦å†™ç©ºé—´
   è®¾è®¡ç†å¿µï¼š
   - ä¸‰è¡Œåˆå§‹é«˜åº¦ï¼Œå®‰é™çš„ä¹¦å†™é‚€è¯·
   - åº•éƒ¨æ˜¾ç¤ºå½“å‰æ—¶é—´å’Œä¿å­˜æŒ‰é’®
   - æ”¯æŒè‡ªå®šä¹‰ä¿å­˜å›¾æ ‡
   ======================================== */

.writing-entry {
  position: relative;
  width: 100%;
  margin: 0 0 var(--spacing-3xl);

  /* æäº¤æ—¶çš„æ·¡å‡ºæ•ˆæœ */
  transition: opacity 200ms ease;
}

.writing-entry.submitting {
  opacity: 0.5;
  pointer-events: none;
}

/* è¾“å…¥åŒºåŸŸ - ç»ç’ƒè´¨æ„Ÿä¹¦å†™ç©ºé—´ */
.writing-entry-input {
  width: 100%;
  min-height: 96px;  /* çº¦ä¸‰è¡Œé«˜åº¦ */
  max-height: 400px;
  padding: 16px 20px;
  padding-bottom: 56px;  /* å¢åŠ åº•éƒ¨ç©ºé—´ï¼Œä¸ºåº•éƒ¨æ ç•™å‡ºæ›´å¤šè·ç¦» */

  /* ç»ç’ƒè´¨æ„Ÿï¼šåŠé€æ˜ + æ¨¡ç³Š */
  background-color: rgba(255, 255, 255, 0.03);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid rgba(255, 255, 255, 0.06);
  box-shadow: 0 2px 16px rgba(0, 0, 0, 0.08),
              inset 0 1px 0 rgba(255, 255, 255, 0.05);
  color: var(--color-text-primary);

  /* æŸ”å’Œåœ†è§’ */
  border-radius: 12px;

  /* å­—ä½“ */
  font-size: var(--font-size-content);
  line-height: var(--line-height-content);
  font-family: inherit;
  font-weight: 400;

  /* å»é™¤é»˜è®¤æ ·å¼ */
  resize: none;
  outline: none;
  box-sizing: border-box;
  overflow-y: hidden;

  /* è¿‡æ¸¡ */
  transition: background-color var(--transition-normal),
              border-color var(--transition-normal),
              box-shadow var(--transition-normal),
              height 150ms ease;
}

/* Placeholder æ ·å¼ - æ›´æ·¡ï¼Œæš—ç¤ºå¯ä¹¦å†™ */
.writing-entry-input::placeholder {
  color: var(--color-text-tertiary);
  opacity: 0.4;
  font-weight: 300;
}

/* èšç„¦çŠ¶æ€ - ç»ç’ƒè´¨æ„Ÿå¢å¼º */
.writing-entry-input:focus {
  background-color: rgba(255, 255, 255, 0.05);
  border-color: rgba(255, 255, 255, 0.12);
  box-shadow: 0 4px 24px rgba(0, 0, 0, 0.12),
              inset 0 1px 0 rgba(255, 255, 255, 0.08);
}

/* åº•éƒ¨æ ï¼šæ—¶é—´ + ä¿å­˜æŒ‰é’® */
.writing-entry-footer {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 8px;  /* ä¸ä¸‹è¾¹æ¡†ä¿æŒ 8px è·ç¦» */
  height: 40px;
  padding: 0 16px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  pointer-events: none;  /* è®©ç‚¹å‡»ç©¿é€åˆ° textarea */
}

/* åº•éƒ¨æ—¶é—´æ˜¾ç¤º - æ¸…æ™°å¯æ„ŸçŸ¥çš„æ—¶é—´é”šç‚¹ */
.writing-entry-time {
  font-size: 12px;
  font-weight: 400;
  color: var(--color-text-secondary);
  opacity: 0.7;
  letter-spacing: 0.5px;
  font-variant-numeric: tabular-nums;
  transition: opacity var(--transition-normal);
  pointer-events: auto;
}

/* èšç„¦æ—¶æ—¶é—´æ›´æ¸…æ™° */
.writing-entry:focus-within .writing-entry-time {
  opacity: 0.9;
}

/* ä¿å­˜æŒ‰é’® */
.writing-entry-submit {
  width: 28px;
  height: 28px;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;

  background-color: transparent;
  border: 1px solid rgba(0, 0, 0, 0.08);
  border-radius: 6px;

  cursor: pointer;
  pointer-events: auto;

  /* é»˜è®¤éšè— */
  opacity: 0;
  transform: scale(0.9);

  /* è¿‡æ¸¡ */
  transition: opacity var(--transition-normal),
              transform var(--transition-normal),
              background-color var(--transition-fast),
              border-color var(--transition-fast);
}

/* èšç„¦æ—¶æ˜¾ç¤ºæŒ‰é’® */
.writing-entry:focus-within .writing-entry-submit,
.writing-entry.submitting .writing-entry-submit {
  opacity: 0.5;
  transform: scale(1);
}

/* ä¿å­˜æŒ‰é’® hover */
.writing-entry-submit:hover {
  opacity: 1 !important;
  background-color: var(--color-text-primary);
  border-color: var(--color-text-primary);
}

/* ä¿å­˜æŒ‰é’® active */
.writing-entry-submit:active {
  transform: scale(0.95);
}

/* è‡ªå®šä¹‰å›¾æ ‡æ ·å¼ */
.submit-icon-custom {
  width: 70%;
  height: 70%;
  object-fit: contain;
  opacity: 0.6;
  transition: opacity var(--transition-fast);
}

.writing-entry-submit:hover .submit-icon-custom {
  opacity: 1;
  filter: brightness(0) invert(1);  /* hover æ—¶åè½¬ä¸ºç™½è‰² */
}

/* å¤‡ç”¨å›¾æ ‡æ ·å¼ */
.submit-icon-fallback {
  width: 70%;
  height: 70%;
  color: var(--color-text-secondary);
  transition: color var(--transition-fast);
}

.writing-entry-submit:hover .submit-icon-fallback {
  color: var(--color-bg-primary);
}

/* ========================================
   æ–°è®°å½•çš„å…¥åœºåŠ¨ç”»
   ======================================== */

.entry-fade-in {
  animation: entrySlideIn 300ms ease-out;
}

@keyframes entrySlideIn {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ========================================
   å†™ä½œå…¥å£ - æ·±è‰²æ¨¡å¼é€‚é…ï¼ˆç»ç’ƒè´¨æ„Ÿï¼‰
   ======================================== */

@media (prefers-color-scheme: dark) {
  .writing-entry-input {
    background-color: rgba(255, 255, 255, 0.03);
    border-color: rgba(255, 255, 255, 0.06);
    box-shadow: 0 2px 16px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.05);
  }

  .writing-entry-input:focus {
    background-color: rgba(255, 255, 255, 0.05);
    border-color: rgba(255, 255, 255, 0.12);
    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.25),
                inset 0 1px 0 rgba(255, 255, 255, 0.08);
  }

  .writing-entry-input::placeholder {
    opacity: 0.35;
  }

  .writing-entry-time {
    color: var(--color-text-secondary);
  }

  .writing-entry-submit {
    border-color: rgba(255, 255, 255, 0.10);
  }

  .writing-entry-submit:hover {
    background-color: var(--color-text-primary);
    border-color: var(--color-text-primary);
  }

  .submit-icon-custom {
    filter: brightness(0) invert(0.7);  /* æ·±è‰²æ¨¡å¼ä¸‹å›¾æ ‡å˜äº® */
  }

  .writing-entry-submit:hover .submit-icon-custom {
    filter: brightness(0) invert(0.1);  /* hover æ—¶å˜æ·± */
  }

  .submit-icon-fallback {
    color: var(--color-text-secondary);
  }

  .writing-entry-submit:hover .submit-icon-fallback {
    color: var(--color-bg-primary);
  }
}

[data-theme="dark"] .writing-entry-input {
  background-color: rgba(255, 255, 255, 0.03);
  border-color: rgba(255, 255, 255, 0.06);
  box-shadow: 0 2px 16px rgba(0, 0, 0, 0.2),
              inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

[data-theme="dark"] .writing-entry-input:focus {
  background-color: rgba(255, 255, 255, 0.05);
  border-color: rgba(255, 255, 255, 0.12);
  box-shadow: 0 4px 24px rgba(0, 0, 0, 0.25),
              inset 0 1px 0 rgba(255, 255, 255, 0.08);
}

[data-theme="dark"] .writing-entry-input::placeholder {
  opacity: 0.35;
}

[data-theme="dark"] .writing-entry-time {
  color: var(--color-text-secondary);
}

[data-theme="dark"] .writing-entry-submit {
  border-color: rgba(255, 255, 255, 0.10);
}

[data-theme="dark"] .writing-entry-submit:hover {
  background-color: var(--color-text-primary);
  border-color: var(--color-text-primary);
}

[data-theme="dark"] .submit-icon-custom {
  filter: brightness(0) invert(0.7);
}

[data-theme="dark"] .writing-entry-submit:hover .submit-icon-custom {
  filter: brightness(0) invert(0.1);
}

[data-theme="dark"] .submit-icon-fallback {
  color: var(--color-text-secondary);
}

[data-theme="dark"] .writing-entry-submit:hover .submit-icon-fallback {
  color: var(--color-bg-primary);
}

/* æµ…è‰²æ¨¡å¼æ˜¾å¼å®šä¹‰ï¼ˆç»ç’ƒè´¨æ„Ÿï¼‰*/
[data-theme="light"] .writing-entry-input {
  background-color: rgba(255, 255, 255, 0.6) !important;
  border-color: rgba(0, 0, 0, 0.06) !important;
  box-shadow: 0 2px 16px rgba(0, 0, 0, 0.04),
              inset 0 1px 0 rgba(255, 255, 255, 0.8) !important;
}

[data-theme="light"] .writing-entry-input:focus {
  background-color: rgba(255, 255, 255, 0.75) !important;
  border-color: rgba(0, 0, 0, 0.10) !important;
  box-shadow: 0 4px 24px rgba(0, 0, 0, 0.06),
              inset 0 1px 0 rgba(255, 255, 255, 0.9) !important;
}

[data-theme="light"] .writing-entry-submit {
  border-color: rgba(0, 0, 0, 0.08) !important;
}

[data-theme="light"] .writing-entry-submit:hover {
  background-color: var(--color-text-primary) !important;
  border-color: var(--color-text-primary) !important;
}

[data-theme="light"] .submit-icon-custom {
  filter: none !important;
}

[data-theme="light"] .writing-entry-submit:hover .submit-icon-custom {
  filter: brightness(0) invert(1) !important;
}

/* ========================================
   å†™ä½œå…¥å£ - å“åº”å¼è°ƒæ•´
   ======================================== */

@media (min-width: 768px) {
  .writing-entry-input {
    padding: 20px 24px;
    padding-bottom: 60px;  /* æ¡Œé¢ç«¯æ›´å®½æ¾ */
    min-height: 108px;
  }

  .writing-entry-footer {
    height: 44px;
    padding: 0 20px;
    bottom: 10px;  /* æ¡Œé¢ç«¯è·ç¦»ç¨å¤§ */
  }

  .writing-entry-submit {
    width: 32px;
    height: 32px;
  }
}

@media (max-width: 767px) {
  .writing-entry {
    margin-bottom: var(--spacing-2xl);
  }

  .writing-entry-input {
    font-size: 15px;
    padding: 14px 16px;
    padding-bottom: 52px;
    min-height: 88px;
  }

  .writing-entry-footer {
    height: 36px;
    padding: 0 12px;
    bottom: 6px;
  }

  .writing-entry-time {
    font-size: 11px;
  }

  .writing-entry-submit {
    width: 26px;
    height: 26px;
  }
}
