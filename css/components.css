/* æ–°å»ºæŒ‰é’® */
.btn-new {
  width: 32px;
  height: 32px;
  font-size: 24px;
  color: var(--color-text-secondary);
  transition: color var(--transition-fast);
}

.btn-new:hover {
  color: var(--color-text-primary);
}

/* ç©ºçŠ¶æ€ */
.empty-state {
  text-align: center;
  padding: var(--spacing-3xl) 0;
}

.empty-hint {
  font-size: var(--font-size-date);
  color: var(--color-text-tertiary);
}

/* ========================================
   å¹´ä»½åˆ†éš”ç¬¦ï¼ˆæ—¶é—´ç« èŠ‚ç•™ç™½ï¼‰
   ======================================== */

.year-divider {
  position: relative;
  height: 180px;  /* è¶…å¤§ç•™ç™½ï¼Œè¥é€ æ—¶é—´æ–­å±‚ */
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 80px 0;  /* é¢å¤–ä¸Šä¸‹é—´è·ï¼Œå¼ºåŒ–ç« èŠ‚æ„Ÿ */
}

.year-divider-number {
  font-size: 80px;
  font-weight: 100;  /* æç»†å­—ä½“ï¼Œé™ä½å­˜åœ¨æ„Ÿ */
  color: var(--color-text-primary);
  opacity: 0.1;  /* ææ·¡ï¼Œè‹¥éšè‹¥ç°çš„æ—¶é—´æ°´å° */
  letter-spacing: 8px;
  user-select: none;
  pointer-events: none;

  /* ç­‰å®½æ•°å­—ï¼Œä¿æŒå¯¹é½ */
  font-variant-numeric: tabular-nums;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;

  /* å¾®å¦™çš„æµ®ç°åŠ¨ç”» */
  animation: yearFadeIn 1200ms ease-out;
}

@keyframes yearFadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 0.1;
    transform: translateY(0);
  }
}

/* å¯é€‰ï¼šhover æ—¶å¾®å¾®æµ®ç° */
.year-divider:hover .year-divider-number {
  opacity: 0.2;
  transition: opacity 600ms ease;
}

/* ç§»åŠ¨ç«¯ä¼˜åŒ– */
@media (max-width: 767px) {
  .year-divider {
    height: 140px;
    margin: 60px 0;
  }

  .year-divider-number {
    font-size: 60px;
    letter-spacing: 4px;
  }
}

/* æ—¥æœŸåˆ†ç»„å®¹å™¨ */
.date-group {
  position: relative;
  transition: background-color 400ms ease;
  margin-left: -8px;
  margin-right: -8px;
  padding-left: 8px;
  padding-right: 8px;
  border-radius: 4px;
}

/* ğŸ†• æ—¥æœŸåˆ†ç»„é«˜äº®ï¼ˆé¼ æ ‡æ‚¬åœè”åŠ¨ï¼‰*/
.date-group--active {
  background-color: rgba(0, 0, 0, 0.02);
}

/* ğŸ†• ç”Ÿæ—¥åˆ†ç»„ï¼šæœ€å¤§ç•™ç™½ï¼ˆç³»ç»Ÿçº§ï¼‰*/
.date-group--birthday {
  margin-top: 40px;
  margin-bottom: 40px;
}

/* ğŸ†• ç”Ÿæ—¥ä¾§è¾¹æ ‡è®°ï¼ˆå·¦ä¾§ç²—ç«–çº¿ï¼‰*/
.birthday-mark {
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 3px;
  background: linear-gradient(
    to bottom,
    var(--color-birthday) 0%,
    rgba(47, 79, 108, 0.5) 50%,
    var(--color-birthday) 100%
  );
  border-radius: 0 1.5px 1.5px 0;
}

/* ğŸ†• çºªå¿µæ—¥åˆ†ç»„ï¼šå¢åŠ ä¸Šä¸‹ç•™ç™½ */
.date-group--anniversary {
  margin-top: 24px;
  margin-bottom: 24px;
}

/* ğŸ†• çºªå¿µæ—¥ä¾§è¾¹æ ‡è®°ï¼ˆå·¦ä¾§ç»†ç«–çº¿ï¼‰*/
.anniversary-mark {
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 2px;
  background: linear-gradient(
    to bottom,
    var(--color-anniversary) 0%,
    rgba(139, 99, 56, 0.4) 50%,
    var(--color-anniversary) 100%
  );
  border-radius: 0 1px 1px 0;
}

/* æ—¥æœŸåˆ†å‰²çº¿ */
.date-divider {
  margin: 56px 0 24px;  /* ä¼˜åŒ–ï¼šä¸å¯¹ç§°é—´è·ï¼ˆä¸Š 56px / ä¸‹ 24pxï¼‰*/
  border-top: 1px dashed var(--color-divider);
  padding-top: var(--spacing-lg);
}

/* ç”Ÿæ—¥çš„æ—¥æœŸåˆ†å‰²çº¿ï¼šåŒçº¿ + é›é’è‰² + æœ€å¤§ç•™ç™½ï¼ˆç³»ç»Ÿçº§ï¼‰*/
.date-group--birthday .date-divider {
  border-top: 2px solid var(--color-birthday);
  margin: 80px 0 40px;  /* æœ€å¤§çš„ç•™ç™½ */
  padding-top: var(--spacing-2xl);
  position: relative;
}

/* ç”Ÿæ—¥åˆ†å‰²çº¿ä¸‹æ–¹çš„å¾®å¦™è£…é¥°çº¿ï¼ˆé›é’è‰²ï¼‰*/
.date-group--birthday .date-divider::after {
  content: '';
  position: absolute;
  top: -5px;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(
    to right,
    transparent 0%,
    rgba(47, 79, 108, 0.15) 20%,
    rgba(47, 79, 108, 0.15) 80%,
    transparent 100%
  );
}

/* çºªå¿µæ—¥çš„æ—¥æœŸåˆ†å‰²çº¿ï¼šå®çº¿ + æš–æ£•è‰² + æ›´æ˜æ˜¾ */
.date-group--anniversary .date-divider {
  border-top: 1.5px solid var(--color-anniversary);
  margin: 64px 0 32px;  /* æ›´å¤§çš„ç•™ç™½ */
  padding-top: var(--spacing-xl);
}

/* ç¬¬ä¸€ä¸ªæ—¥æœŸåˆ†ç»„ï¼šå‡å°‘ä¸Šæ–¹ç•™ç™½ */
.date-group:first-child .date-divider {
  margin-top: 0;
}

/* æ—¥æœŸå¤´éƒ¨ï¼ˆåŒ…å«å¤©æ°”é€‰æ‹©å™¨ï¼‰*/
.date-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: var(--spacing-sm);
}

.date-label {
  font-size: var(--font-size-date);
  color: var(--color-text-tertiary);
  font-weight: 400;
  letter-spacing: 1px;  /* æ–°å¢ï¼šå­—é—´è·æ‹‰å®½ï¼Œå¢å¼ºåˆ»å°æ„Ÿ */
  transition: all var(--transition-normal);
}

/* ğŸ†• ç”Ÿæ—¥æ ‡ç­¾ï¼šæœ€å¤§ + é›é’è‰²ï¼ˆç³»ç»Ÿçº§ï¼‰*/
.date-label--birthday {
  font-size: 12px;  /* æœ€å¤§ */
  font-weight: 600;  /* æœ€ç²— */
  color: var(--color-birthday);
  opacity: 1;
  letter-spacing: 2px;  /* æœ€å®½å­—é—´è· */
}

/* ğŸ†• çºªå¿µæ—¥æ ‡ç­¾ï¼šç¨å¤§ + æš–æ£•è‰² */
.date-label--anniversary {
  font-size: 11px;  /* ä» 10px å¢åŠ åˆ° 11px */
  font-weight: 500;
  color: var(--color-anniversary);
  opacity: 1;
  letter-spacing: 1.5px;
}

/* ========================================
   å¤©æ°”é€‰æ‹©å™¨
   ======================================== */

.weather-selector {
  width: 16px;
  height: 16px;
  padding: 0;
  border: none;
  background: transparent;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0.25;  /* é»˜è®¤ææ·¡ */
  transition: opacity var(--transition-normal),
              transform var(--transition-fast);
  flex-shrink: 0;
}

.weather-selector:hover {
  opacity: 0.5;  /* hover æ—¶ç•¥å¾®å¢å¼º */
  transform: scale(1.1);
}

/* æœ‰å¤©æ°”æ—¶ç¨å¾®å¢å¼ºå­˜åœ¨æ„Ÿ */
.weather-selector[data-weather]:not([data-weather=""]) {
  opacity: 0.35;
}

.weather-selector[data-weather]:not([data-weather=""]):hover {
  opacity: 0.6;
}

/* å¤©æ°”å›¾æ ‡ */
.weather-icon {
  width: 100%;
  height: 100%;
  color: var(--color-text-tertiary);
}

/* ç©ºçŠ¶æ€ï¼šæ˜¾ç¤ºä¸€ä¸ªææ·¡çš„åœ†ç‚¹ï¼ˆæš—ç¤ºå¯ç‚¹å‡»ï¼‰*/
.weather-selector[data-weather=""]::before {
  content: '';
  width: 4px;
  height: 4px;
  border-radius: 50%;
  background-color: currentColor;
  display: block;
}

.weather-selector[data-weather=""]:hover::before {
  width: 6px;
  height: 6px;
}

/* ç¡®ä¿æŒ‰é’®åœ¨ç§»åŠ¨ç«¯æœ‰è¶³å¤Ÿçš„ç‚¹å‡»åŒºåŸŸ */
@media (max-width: 767px) {
  .weather-selector {
    width: 20px;
    height: 20px;
    margin-right: -4px;  /* è§†è§‰ä¸Šæ›´ç´§å‡‘ */
  }
}

/* å•æ¡è®°å½• */
.entry-item {
  display: flex;
  margin-bottom: var(--entry-spacing-medium);  /* é»˜è®¤ä¸­ç­‰é—´è· */
  cursor: pointer;
  transition: background-color var(--transition-slow);  /* ä¼˜åŒ–ï¼šæ…¢é€Ÿæµ®ç° */
  padding: 8px 0;                    /* æ–°å¢ï¼šä¸Šä¸‹ç•™ç™½ï¼Œæ‰©å¤§ç‚¹å‡»åŒºåŸŸ */
  margin-left: -8px;                 /* æŠµæ¶ˆ paddingï¼Œä¿æŒå¯¹é½ */
  margin-right: -8px;
  border-radius: 4px;                /* æ–°å¢ï¼šå¾®å¦™çš„åœ†è§’ */
}

.entry-item:hover {
  background-color: var(--hover-bg); /* ä¼˜åŒ–ï¼šææ·¡èƒŒæ™¯ï¼Œè€Œé opacity */
}

/* é¦–æ¡è®°å½•ï¼šé¢å¤–ä¸Šæ–¹é—´è· */
.date-group .entry-item:first-of-type {
  margin-top: 12px;
}

/* æœ«æ¡è®°å½•ï¼šå‡å°‘ä¸‹æ–¹é—´è· */
.date-group:last-child .entry-item:last-of-type {
  margin-bottom: 16px;
}

.entry-time {
  width: 48px;
  flex-shrink: 0;
  font-size: var(--font-size-time);
  color: var(--color-text-secondary);
  text-align: right;
  padding-top: 2px;
  opacity: var(--time-opacity-old);  /* æ–°å¢ï¼šé»˜è®¤åŠé€æ˜ */
  transition: opacity var(--transition-slow);  /* æ–°å¢ï¼šæµ®ç°æ•ˆæœ */
  position: relative;  /* ç”¨äºå®šä½æ—¶é—´çº¿ */
}

.entry-item:hover .entry-time {
  opacity: var(--time-opacity-hover); /* æ–°å¢ï¼šhover æ—¶æµ®ç° */
}

.entry-content {
  flex: 1;
  margin-left: var(--spacing-sm);
  font-size: var(--font-size-content);
  line-height: var(--line-height-normal);  /* ä¼˜åŒ–ï¼šä½¿ç”¨å˜é‡ */
  color: var(--content-color-normal);      /* ä¼˜åŒ–ï¼šä½¿ç”¨å˜é‡ */
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* çŸ­å¥æ ·å¼ï¼ˆé€šè¿‡ JS åŠ¨æ€æ·»åŠ  classï¼‰*/
.entry-item--short .entry-content {
  color: var(--content-color-short);
  line-height: var(--line-height-short);
}

.entry-item--short {
  margin-bottom: var(--entry-spacing-short);
}

/* é•¿æ–‡æ ·å¼ï¼ˆé€šè¿‡ JS åŠ¨æ€æ·»åŠ  classï¼‰*/
.entry-item--long {
  margin-bottom: var(--entry-spacing-long);
}

/* ç¼–è¾‘å™¨é®ç½©å±‚ */
.editor-overlay {
  display: none; /* é»˜è®¤éšè— */
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: var(--color-bg-overlay);
  z-index: 200;
  animation: fadeIn var(--transition-normal);
}

.editor-overlay.active {
  display: flex;
  justify-content: center;
  align-items: center;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* ç¼–è¾‘å™¨å®¹å™¨ */
.editor-container {
  width: 90%;
  max-width: 600px;
  max-height: 85vh;  /* ä¼˜åŒ–ï¼š80vh â†’ 85vh */
  background-color: #ffffff;
  border-radius: 8px;
  display: flex;
  flex-direction: column;
  animation: slideUp var(--transition-normal);
  overflow: hidden;  /* ç¡®ä¿å†…å®¹ä¸æº¢å‡º */
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.editor-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--spacing-sm) var(--spacing-md);
  border-bottom: 1px solid var(--color-divider);
}

.btn-close {
  font-size: 28px;
  color: var(--color-text-secondary);
  line-height: 1;
}

.editor-time {
  font-size: var(--font-size-time);
  color: var(--color-text-secondary);
}

.editor-textarea {
  /* ä¸ä½¿ç”¨ flex: 1ï¼Œæ”¹ä¸ºè‡ªé€‚åº”é«˜åº¦ */
  min-height: 80px;                 /* æœ€å°é«˜åº¦ï¼ˆçº¦ 2-3 è¡Œï¼‰*/
  max-height: 480px;                /* æœ€å¤§é«˜åº¦ï¼ˆçº¦ 16 è¡Œï¼‰*/
  padding: var(--spacing-md);
  font-size: var(--font-size-content);
  line-height: var(--line-height-content);
  overflow-y: hidden;               /* é»˜è®¤éšè—æ»šåŠ¨æ¡ */
  transition: none;                 /* ä¸ä½¿ç”¨åŠ¨ç”»ï¼Œä¿æŒå®‰é™ */
  resize: none;                     /* ç¦æ­¢æ‰‹åŠ¨æ‹–æ‹½è°ƒæ•´å¤§å° */
}

/* ç¼–è¾‘å™¨ focusï¼šå…‹åˆ¶çš„åé¦ˆ */
.editor-textarea:focus {
  outline: none;
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.06);
}

.editor-footer {
  display: flex;
  justify-content: space-between;
  padding: var(--spacing-sm) var(--spacing-md);
  border-top: 1px solid var(--color-divider);
}

.btn-delete {
  font-size: 14px;
  color: var(--color-text-tertiary);
}

.btn-delete:hover {
  color: #d32f2f;
}

.btn-save {
  font-size: 14px;
  color: var(--color-text-primary);
  font-weight: 500;
}

.btn-save:hover {
  opacity: 0.7;
}

/* å¹³æ¿ç«¯ä¼˜åŒ– */
@media (min-width: 768px) and (max-width: 1023px) {
  .timeline-container {
    padding: 0 var(--container-padding-tablet);
  }

  .header-container {
    padding: 0 var(--container-padding-tablet);
  }
}

/* ç§»åŠ¨ç«¯ä¼˜åŒ– */
@media (max-width: 767px) {
  .editor-container {
    width: 100%;
    max-width: 100%;
    max-height: 90vh;  /* ç§»åŠ¨ç«¯å¢åŠ åˆ° 90% */
    border-radius: 0;
  }

  .editor-textarea {
    max-height: calc(90vh - 120px); /* å‡å» header å’Œ footer é«˜åº¦ */
  }

  .entry-content {
    font-size: 15px;
  }

  /* ç§»åŠ¨ç«¯ï¼šå¢åŠ ç‚¹å‡»çƒ­åŒº */
  .entry-item {
    padding: 12px 8px;
    margin-left: -8px;
    margin-right: -8px;
  }
}

/* ========================================
   æ—¶é—´é”šç‚¹ï¼ˆé¡¶éƒ¨æ—¥æœŸå±•ç¤ºï¼‰
   ======================================== */
.time-anchor {
  position: fixed;
  top: var(--header-height);
  left: 0;
  right: 0;
  height: 64px;
  background-color: rgba(250, 250, 250, 0.85);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(232, 232, 232, 0.4);
  z-index: 90;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: opacity var(--transition-normal);
}

.time-anchor-container {
  display: flex;
  align-items: baseline;
  gap: 12px;
}

/* å¹´ä»½ï¼šæå¼±å­˜åœ¨æ„Ÿ */
.time-anchor-year {
  font-size: 11px;
  font-weight: 400;
  color: var(--color-text-tertiary);
  opacity: 0.4;
  letter-spacing: 0.5px;
  transition: opacity 300ms ease;  /* å¹´ä»½å˜åŒ–æ—¶çš„è¿‡æ¸¡ */
}

/* å¹´ä»½å˜åŒ–æ—¶çš„å¾®å¦™å¼ºè°ƒ */
.time-anchor-year--highlight {
  opacity: 1 !important;
}

/* æœˆ / æ—¥ï¼šè§†è§‰æ ¸å¿ƒ */
.time-anchor-primary {
  display: flex;
  align-items: baseline;
  font-size: 28px;
  font-weight: 300;
  color: var(--color-text-primary);
  letter-spacing: -0.5px;
  line-height: 1;
}

.time-anchor-month,
.time-anchor-day {
  font-variant-numeric: tabular-nums;
}

.time-anchor-separator {
  font-size: 20px;
  opacity: 0.3;
  margin: 0 2px;
}

/* æ˜ŸæœŸï¼šè¾…åŠ©ä¿¡æ¯ */
.time-anchor-weekday {
  font-size: 11px;
  font-weight: 400;
  color: var(--color-text-secondary);
  opacity: 0.5;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* ç§»åŠ¨ç«¯ä¼˜åŒ– */
@media (max-width: 767px) {
  .time-anchor {
    height: 56px;
  }

  .time-anchor-container {
    gap: 8px;
  }

  .time-anchor-year {
    font-size: 10px;
  }

  .time-anchor-primary {
    font-size: 24px;
  }

  .time-anchor-separator {
    font-size: 18px;
  }

  .time-anchor-weekday {
    font-size: 10px;
  }
}

/* ========================================
   åº•éƒ¨æµ®åŠ¨æ·»åŠ æŒ‰é’®
   ======================================== */
.btn-add-float {
  position: fixed;
  bottom: 32px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 150;

  /* å°ºå¯¸ */
  width: 56px;
  height: 56px;
  border-radius: 50%;

  /* è§†è§‰ */
  background-color: var(--color-text-primary);
  color: var(--color-bg-primary);
  border: none;
  cursor: pointer;

  /* æè½»å¾®é˜´å½±ï¼ˆå…‹åˆ¶ï¼‰*/
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08),
              0 1px 2px rgba(0, 0, 0, 0.04);

  /* å¸ƒå±€ */
  display: flex;
  align-items: center;
  justify-content: center;

  /* è¿‡æ¸¡ */
  transition: transform var(--transition-normal),
              box-shadow var(--transition-normal);
}

.btn-add-float:hover {
  transform: translateX(-50%) scale(1.05);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12),
              0 2px 4px rgba(0, 0, 0, 0.06);
}

.btn-add-float:active {
  transform: translateX(-50%) scale(0.95);
}

.btn-add-icon {
  width: 24px;
  height: 24px;
}

/* ç§»åŠ¨ç«¯ä¼˜åŒ– */
@media (max-width: 767px) {
  .btn-add-float {
    bottom: 24px;
    bottom: max(24px, env(safe-area-inset-bottom));
  }

  /* æ‰©å¤§ç‚¹å‡»åŒºåŸŸ */
  .btn-add-float::before {
    content: '';
    position: absolute;
    top: -8px;
    left: -8px;
    right: -8px;
    bottom: -8px;
  }
}

/* æ¨ªå±æ¨¡å¼ä¼˜åŒ– */
@media (orientation: landscape) and (max-width: 767px) {
  .btn-add-float {
    bottom: 16px;
  }
}

/* ========================================
   ç”Ÿå‘½æ—¥å†ï¼ˆå·¦ä¾§ï¼‰
   ======================================== */

.life-calendar {
  width: 280px;  /* ä» 240px å¢åŠ åˆ° 280pxï¼Œå®¹çº³å‘¨æ•°åˆ— */
  flex-shrink: 0;
  position: sticky;
  top: calc(var(--header-height) + 64px + var(--spacing-3xl));
  align-self: flex-start;

  padding: 0 var(--spacing-md);
  max-height: calc(100vh - var(--header-height) - 64px - var(--spacing-3xl) - 40px);
  overflow-y: auto;

  /* éšè—æ»šåŠ¨æ¡ä½†ä¿ç•™æ»šåŠ¨åŠŸèƒ½ */
  scrollbar-width: none;  /* Firefox */
  -ms-overflow-style: none;  /* IE/Edge */
}

.life-calendar::-webkit-scrollbar {
  display: none;  /* Chrome/Safari */
}

/* æ€»æ ‡é¢˜ */
.life-calendar-header {
  margin-bottom: var(--spacing-md);
  text-align: center;
}

.calendar-title {
  font-size: 10px;
  font-weight: 400;
  color: var(--color-text-tertiary);
  opacity: 0.3;
  letter-spacing: 1px;
  text-transform: uppercase;
}

/* ========================================
   å¹´é¾„å—
   ======================================== */
.age-section {
  margin-bottom: var(--spacing-lg);
}

.age-header {
  display: flex;
  align-items: baseline;
  gap: 6px;
  margin-bottom: 12px;
  padding-left: 4px;
}

/* å¹´é¾„ï¼ˆä¸»ä¿¡æ¯ï¼‰*/
.age-primary {
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text-primary);
  opacity: 0.8;
  letter-spacing: 0.5px;
}

/* å¹´ä»½ï¼ˆæ¬¡çº§ä¿¡æ¯ï¼‰*/
.age-secondary {
  font-size: 10px;
  font-weight: 400;
  color: var(--color-text-tertiary);
  opacity: 0.25;
  letter-spacing: 0.5px;
}

.age-calendar-grid {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

/* ========================================
   æ˜ŸæœŸå¤´éƒ¨
   ======================================== */
.calendar-weekday-header {
  display: grid;
  grid-template-columns: 28px repeat(7, 1fr);  /* å·¦ä¾§å‘¨æ•°å ä½ + 7å¤© */
  gap: 2px;
  margin-bottom: 8px;
  padding-bottom: 6px;
  border-bottom: 1px solid rgba(0, 0, 0, 0.04);
}

.week-number-cell {
  width: 28px;  /* ä¸å‘¨æ•°æ ‡ç­¾åŒå®½ */
}

.weekday-cell {
  font-size: 9px;
  font-weight: 400;
  color: var(--color-text-tertiary);
  opacity: 0.3;
  text-align: center;
  letter-spacing: 0.5px;
  text-transform: uppercase;
}

/* ========================================
   æ—¥å†ç½‘æ ¼ï¼ˆæ”¹ä¸ºè¡Œå¼å¸ƒå±€ï¼‰
   ======================================== */
.life-calendar-grid {
  display: flex;
  flex-direction: column;
  gap: 2px;
  padding-bottom: var(--spacing-xl);
}

/* ========================================
   å‘¨è¡Œï¼ˆæ¯è¡Œ = å‘¨æ•° + 7å¤©ï¼‰
   ======================================== */
.calendar-week-row {
  display: grid;
  grid-template-columns: 28px repeat(7, 1fr);  /* å·¦ä¾§å‘¨æ•° + 7å¤© */
  gap: 2px;
  align-items: center;
}

/* å‘¨æ•°æ ‡ç­¾ */
.week-number {
  width: 28px;
  font-size: 9px;
  font-weight: 400;
  color: var(--color-text-tertiary);
  opacity: 0.2;
  text-align: right;
  padding-right: 6px;
  letter-spacing: 0.5px;
}

/* ========================================
   æ—¥æœŸæ–¹å—ï¼ˆä¿æŒåŸæœ‰æ ·å¼ï¼‰
   ======================================== */
.calendar-day {
  width: 100%;
  aspect-ratio: 1;
  background-color: rgba(0, 0, 0, 0.04);
  border-radius: 2px;
  transition: background-color var(--transition-normal),
              transform var(--transition-fast),
              opacity var(--transition-slow);
  cursor: default;
  position: relative;
  opacity: 0.85;  /* è¿‡å»æœˆä»½ç•¥å¾®è¤ªè‰² */
}

/* ç©ºç™½æ–¹å—ï¼ˆç”¨äºå¯¹é½æ˜ŸæœŸæˆ–æœªæ¥æ—¥æœŸï¼‰*/
.calendar-day--empty {
  background-color: transparent;
  cursor: default;
  pointer-events: none;
  opacity: 0.3;
}

/* å½“å‰æœˆçš„æ–¹å— */
.calendar-day--current-month {
  opacity: 1;
}

/* æœ‰è®°å½•çš„æ—¥å­ */
.calendar-day--recorded {
  background-color: rgba(0, 0, 0, 0.15);
}

/* ä»Šå¤© */
.calendar-day--today {
  background-color: var(--color-text-primary);
  border: 1px solid rgba(255, 255, 255, 0.3);
  box-sizing: border-box;
  opacity: 1 !important;  /* ä»Šå¤©å§‹ç»ˆå…¨äº® */
}

/* ä»Šå¤© + æœ‰è®°å½• */
.calendar-day--today.calendar-day--recorded {
  background-color: var(--color-text-primary);
}

/* Hover æ•ˆæœï¼šå¾®å¾®æ”¾å¤§ */
.calendar-day:hover:not(.calendar-day--empty) {
  transform: scale(1.15);
  background-color: rgba(0, 0, 0, 0.25);
}

/* å½“å‰é˜…è¯»çš„æ—¥æœŸï¼šè½»å¾®é«˜äº®ï¼ˆå¿ƒç†è”åŠ¨ï¼‰*/
.calendar-day--active {
  background-color: rgba(0, 0, 0, 0.30);
  transition: background-color 600ms ease;  /* ææ…¢è¿‡æ¸¡ï¼Œè¥é€ å‘¼å¸æ„Ÿ */
  position: relative;
}

.calendar-day--active.calendar-day--recorded {
  background-color: rgba(0, 0, 0, 0.35);
}

.calendar-day--today.calendar-day--active {
  background-color: var(--color-text-primary);
}

/* ğŸ†• è”åŠ¨æ—¶çš„å¾®å¦™è„‰åŠ¨ï¼ˆä»…åœ¨æ¿€æ´»ç¬é—´ï¼‰*/
@keyframes calendarPulse {
  0% {
    box-shadow: 0 0 0 0 rgba(0, 0, 0, 0.3);
  }
  50% {
    box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.1);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(0, 0, 0, 0);
  }
}

.calendar-day--active {
  animation: calendarPulse 800ms ease-out;
}


/* ========================================
   å¹´ä»½åˆ†éš”ç¬¦ï¼ˆè°ƒæ•´ä¸ºå…¨å®½ï¼‰
   ======================================== */
.calendar-year-divider {
  height: 32px;
  position: relative;
  display: flex;
  align-items: center;
  margin: 8px 0;
}

.calendar-year-divider::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 32px;  /* è·³è¿‡å‘¨æ•°åˆ— */
  right: 0;
  height: 1px;
  background: rgba(0, 0, 0, 0.04);
}

/* ========================================
   æœˆä»½ç¬¬ä¸€å¤©æ ‡è®°ï¼ˆéšæ€§èŠ‚å¥ï¼‰
   ======================================== */
.calendar-day--month-start::before {
  content: '';
  position: absolute;
  left: 0;
  top: 15%;
  bottom: 15%;
  width: 2px;
  background-color: rgba(0, 0, 0, 0.15);
  border-radius: 0 1px 1px 0;
}

/* ========================================
   ç‰¹æ®Šæ—¥æœŸæ ‡è®°ï¼ˆä¸‰ä¸ªå±‚çº§ + ç³»ç»Ÿçº§ç”Ÿæ—¥ï¼‰
   ======================================== */

/* ç³»ç»Ÿçº§ï¼šç”Ÿæ—¥ï¼ˆBirthdayï¼‰- æ—¶é—´åŸç‚¹ï¼Œæœ€é«˜ä¼˜å…ˆçº§ */
.calendar-day--birthday {
  /* è¾¹æ¡†ï¼šé›é’è‰²ï¼ˆæ·±è“ï¼‰ï¼Œ2px */
  border: 2px solid var(--color-birthday);
  box-sizing: border-box;

  /* èƒŒæ™¯ï¼šæ·¡é›é’è‰²ç‚¹ç¼€ */
  background-color: var(--color-birthday-bg) !important;

  /* è¿‡æ¸¡ */
  transition: all var(--transition-normal);
}

/* ç”Ÿæ—¥ hoverï¼šè¾¹æ¡†åŠ æ·±ï¼ŒèƒŒæ™¯ç•¥æ·± */
.calendar-day--birthday:hover {
  border-color: rgba(47, 79, 108, 0.9);
  background-color: rgba(47, 79, 108, 0.18) !important;
  box-shadow: 0 0 0 1px rgba(47, 79, 108, 0.15);  /* å¾®å¦™å¤–æ™• */
}

/* ç”Ÿæ—¥ + æœ‰è®°å½•ï¼šèƒŒæ™¯åŠ æ·± */
.calendar-day--birthday.calendar-day--recorded {
  background-color: rgba(47, 79, 108, 0.20) !important;
}

/* ç”Ÿæ—¥ + ä»Šå¤©ï¼šç‰¹æ®Šç»„åˆ */
.calendar-day--birthday.calendar-day--today {
  background-color: var(--color-text-primary) !important;
  border-color: var(--color-birthday);
  box-shadow: inset 0 0 0 1px rgba(47, 79, 108, 0.3);
}

/* å±‚çº§ 1ï¼šçºªå¿µæ—¥ï¼ˆAnniversaryï¼‰- äººç”Ÿé‡è¦èŠ‚ç‚¹ */
.calendar-day--anniversary {
  /* è¾¹æ¡†ï¼šæš–æ£•è‰²ï¼ˆç¥ç€ï¼‰ï¼Œ1.5px */
  border: 1.5px solid var(--color-anniversary);
  box-sizing: border-box;

  /* èƒŒæ™¯ï¼šæ·¡æš–æ£•è‰²ç‚¹ç¼€ */
  background-color: var(--color-anniversary-bg) !important;

  /* è¿‡æ¸¡ */
  transition: all var(--transition-normal);
}

/* çºªå¿µæ—¥ hoverï¼šè¾¹æ¡†åŠ æ·±ï¼ŒèƒŒæ™¯ç•¥æ·± */
.calendar-day--anniversary:hover {
  border-color: rgba(139, 99, 56, 0.85);
  background-color: rgba(139, 99, 56, 0.14) !important;
  box-shadow: 0 0 0 1px rgba(139, 99, 56, 0.12);  /* å¾®å¦™å¤–æ™• */
}

/* çºªå¿µæ—¥ + æœ‰è®°å½•ï¼šèƒŒæ™¯åŠ æ·± */
.calendar-day--anniversary.calendar-day--recorded {
  background-color: rgba(139, 99, 56, 0.16) !important;
}

/* çºªå¿µæ—¥ + ä»Šå¤©ï¼šç‰¹æ®Šç»„åˆ */
.calendar-day--anniversary.calendar-day--today {
  background-color: var(--color-text-primary) !important;
  border-color: var(--color-anniversary);
  box-shadow: inset 0 0 0 1px rgba(139, 99, 56, 0.3);
}

/* å±‚çº§ 2ï¼šæ™®é€šç‰¹æ®Šæ—¥æœŸï¼ˆSpecialï¼‰- å€¼å¾—æ ‡è®°ä½†éèŠ‚ç‚¹ */
.calendar-day--special::after {
  content: '';
  position: absolute;
  top: 2px;
  right: 2px;
  width: 2px;
  height: 2px;
  background-color: rgba(0, 0, 0, 0.4);
  border-radius: 50%;
  transition: all var(--transition-normal);
}

/* hover æ—¶åœ†ç‚¹ç•¥å¾®å¢å¤§ */
.calendar-day--special:hover::after {
  width: 3px;
  height: 3px;
  top: 1.5px;
  right: 1.5px;
  background-color: rgba(0, 0, 0, 0.6);
}

/* ========================================
   å“åº”å¼ï¼šå¹³æ¿ç«¯
   ======================================== */
@media (min-width: 768px) and (max-width: 1023px) {
  .life-calendar {
    width: 220px;
  }

  .calendar-weekday-header,
  .calendar-week-row {
    grid-template-columns: 24px repeat(7, 1fr);
  }

  .week-number-cell,
  .week-number {
    width: 24px;
    font-size: 8px;
    padding-right: 4px;
  }

  .weekday-cell {
    font-size: 8px;
  }
}

/* ========================================
   å“åº”å¼ï¼šç§»åŠ¨ç«¯ï¼ˆéšè—å·¦ä¾§æ—¥å†ï¼‰
   ======================================== */
@media (max-width: 767px) {
  .life-calendar {
    display: none;
  }
}

/* ========================================
   ç©ºæ—¥æœŸæç¤ºï¼ˆæ—¶é—´ç©¿æ¢­åçš„è½»é‡çº§åé¦ˆï¼‰
   ======================================== */
.empty-date-hint {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 250;

  padding: 16px 24px;
  background-color: rgba(0, 0, 0, 0.75);
  color: #ffffff;

  font-size: 14px;
  font-weight: 400;
  letter-spacing: 0.5px;

  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);

  opacity: 1;
  transition: opacity 300ms ease;
  pointer-events: none;
}

.empty-date-hint--fade-out {
  opacity: 0;
}

/* ========================================
   å³é”®ä¸Šä¸‹æ–‡èœå•ï¼ˆç‰¹æ®Šæ—¥æœŸæ ‡è®°ï¼‰
   ======================================== */

/* èœå•å®¹å™¨ */
.context-menu {
  position: fixed;
  z-index: 300;
  background-color: #ffffff;
  border-radius: 8px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12),
              0 2px 8px rgba(0, 0, 0, 0.08);
  padding: 8px 0;
  min-width: 240px;
  max-width: 320px;
  opacity: 0;
  transform: scale(0.95);
  transition: opacity var(--transition-fast),
              transform var(--transition-fast);
}

.context-menu.active {
  opacity: 1;
  transform: scale(1);
}

/* èœå•å¤´éƒ¨ï¼ˆæ˜¾ç¤ºæ—¥æœŸï¼‰*/
.context-menu-header {
  padding: 12px 16px 8px;
  border-bottom: 1px solid var(--color-divider);
  margin-bottom: 4px;
}

.context-menu-date {
  font-size: 11px;
  font-weight: 500;
  color: var(--color-text-secondary);
  opacity: 0.6;
  letter-spacing: 0.5px;
}

/* èœå•é¡¹ */
.context-menu-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 16px;
  cursor: pointer;
  transition: background-color var(--transition-fast);
  border: none;
  background: none;
  width: 100%;
  text-align: left;
}

.context-menu-item:hover {
  background-color: rgba(0, 0, 0, 0.04);
}

.context-menu-item:active {
  background-color: rgba(0, 0, 0, 0.06);
}

/* èœå•é¡¹å›¾æ ‡ */
.context-menu-icon {
  width: 20px;
  height: 20px;
  font-size: 16px;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* èœå•é¡¹æ–‡æœ¬åŒºåŸŸ */
.context-menu-text {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.context-menu-label {
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text-primary);
  line-height: 1.3;
}

.context-menu-description {
  font-size: 11px;
  color: var(--color-text-tertiary);
  opacity: 0.7;
  line-height: 1.3;
}

/* åˆ†éš”çº¿ */
.context-menu-divider {
  height: 1px;
  background-color: var(--color-divider);
  margin: 4px 0;
}

/* è¿”å›æŒ‰é’® */
.context-menu-back {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 16px;
  font-size: 12px;
  color: var(--color-text-secondary);
  cursor: pointer;
  border-bottom: 1px solid var(--color-divider);
  margin-bottom: 4px;
  transition: background-color var(--transition-fast);
}

.context-menu-back:hover {
  background-color: rgba(0, 0, 0, 0.02);
}

/* å±é™©æ“ä½œï¼ˆåˆ é™¤ï¼‰*/
.context-menu-item--danger .context-menu-label {
  color: #d32f2f;
}

.context-menu-item--danger:hover {
  background-color: rgba(211, 47, 47, 0.04);
}

/* æ¨¡æ¿é€‰é¡¹å³ä¾§ç®­å¤´ */
.context-menu-arrow {
  font-size: 12px;
  color: var(--color-text-tertiary);
  opacity: 0.4;
}
